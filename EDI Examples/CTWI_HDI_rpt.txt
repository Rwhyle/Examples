INPUT Branching Diagram                                                                                                   //The Below shows the various fields I created, if this field is mandatory or conditional and how many times it can loop                                                                          
  -----------------------                                                                                                                                                                               
                                                                                                                                                                                                        
                        Name                         M/C     Min Use      Max Use        Description                                                                                                    
                                                                                                                                                                                                        
  INPUT*                                              M               1           1                                                                                                                     
     Record HEADER*                                   C               0           1                       Header Record                                                                                 
     Record FECD01P_101*                              C               0           1                       WB/PO#/Job#/Client/Carrier/SCAC/HL                                                            
     Record KEY*                                      C               0           1                       Key required for linking purposes.                                                            
     Group JOB*                                       C               0         999                                                                                                                     
        Record FECD11P_201*                           M               1           1                       Shipment Details                                                                              
        Group Reference_Group*                        C               0          99                                                                                                                     
           Record FECD10P_301*                        C               0           1                       Shipment References                                                                           
           Record FECD10P_414*                        C               0           1                       References                                                                                    
           Record FECD04P_507*                        C               0           1                       Quantity                                                                                      
        Group 302_Group*                              C               0          98                                                                                                                     
           Record FECD05P_302*                        C               0           1                       Clients                                                                                       
           Record FECD08P_401*                        C               0           1                       Names and Addresses                                                                           
        Record FECD12P_303*                           C               0          99                       Waybill/Port Type Locations                                                                   
        Record FECD03P_304:2*                         C               0           1                       Container                                                                                     
        Record FECD14P_416:1*                         C               0           1                       Container                                                                                     
        Record FECD14P_416:2*                         C               0           1                       Container                                                                                     
        Group Quantity*                               C               0          99                                                                                                                     
           Record FECD04P_305*                        C               0           9                       Quantity                                                                                      
           Record FECD04P_402*                        C               0           1                       Weights                                                                                       
        Group Trans_Grp*                              C               0           1                                                                                                                     
           Record FECD02P_306*                        C               0           1                       Mode of Transport/Service Level                                                               
           Record FECD10P_403*                        C               0           1                       References                                                                                    
        Record FECD06P_307*                           C               0          99                       Status                                                                                        
        Group Notes_Group*                            C               0          50                                                                                                                     
           Record FECD13P_308:2*                      C               0           1                       Notes                                                                                         
        Group Quantities*                             C               0          99                                                                                                                     
           Record FECD07P_309*                        C               0           1                       Charges                                                                                       
        Group 310_404_Group*                          C               0          99                       M&N Quantity                                                                                  
           Record FECD10P_310*                        C               0           1                       Quantity                                                                                      
           Record FECD04P_404*                        C               0           1                       References                                                                                    
        Group 311_Group*                              C               0          99                                                                                                                     
           Record FECD04P_311*                        C               0           1                       Quantity                                                                                      
           Record FECD14P_405*                        C               0          99                       Quantities                                                                                    
        Group Hazardous:2*                            C               0          99                                                                                                                     
           Record FECD04P_312*                        C               0           1                       Hazardous Pieces                                                                              
           Record FECD04P_406*                        C               0           9                       Quantity                                                                                      
           Record FECD10P_407*                        C               0           1                       References                                                                                    
     Group TMP_JOB*                                   C               0         999                                                                                                                     
        Record TMP201*                                C               0           1                                                                                                                     
        Record TMP101*                                C               0           1                                                                                                                     
        Record TMP302_401LOOP*                        C               0          98                                                                                                                     
        Record TMP303_302*                            C               0           1                                                                                                                     
        Record TMP_304*                               C               0           1                                                                                                                     
        Record TMP301*                                C               0           1                                                                                                                     
        Record TMP307*                                C               0           1                                                                                                                     
        Record TMP308Loop*                            C               0          50                                                                                                                     
        Record TMP308Loop:2*                          C               0          50                                                                                                                     
        Record TMP310_404Loop*                        C               0          99                                                                                                                     
        Record TMP311_405Loop*                        C               0          99                                                                                                                     
        Record TMP310*                                C               0           1                                                                                                                     
                                                                                                                                                                                                        
  OUTPUT Branching Diagram                                                                                                                                                                              
  ------------------------                                                                                                                                                                              
                                                                                                                                                                                                        
                        Name                         M/C     Min Use      Max Use        Description                                                                                                    
                                                                                                                                                                                                        
  OUTPUT*                                             M               1           1                                                                                                                     
     Group Job*                                       C               0         999                                                                                                                     
        Record HDI*                                   C               0           1                       Header Record                                                                                 
        Record ADR*                                   C               0          98                       Address Record                                                                                
        Record SHP*                                   C               0          99                       Shipment Record                                                                               
        Record DIM*                                   C               0          99                       Dimensions Record                                                                             
        Record UNI*                                   C               0           1                       Units Record                                                                                  
        Record HDL*                                   C               0          50                       Handling Instructions Record                                                                  
        Record SPL*                                   C               0          50                       Special Instructions Record                                                                   
                                                                                                                                                                                                        
  INPUT Record Details                                                                                                                                                                                  
  --------------------                                                                                                                                                                //The Below declares the variables                   
                                                                                                                                                                                                        
  Record HEADER*                          Tag HDR at 1                            Conditional                                           0             1                                                 
  Header Record                                                                                                                                                                                         
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  TPID*                         Trading Partner ID                                              C         0       9 String        X                                     4         9 Left                
  APPID*                        Application ID                                                  C         0       6 String        X                                    13         6 Left                
  APPALIAS*                     Application Alias                                               C         0       6 String        X                                    19         6 Left                
                                                                                                                                                                                                        
  Record FECD01P_101*                     Tag 101 at 1                            Conditional                                           0             1                                                 
  WB/PO#/Job#/Client/Carrier/SCAC/HL                                                                                                                                                                    
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  D01TRAN*                      Transaction Number                                              C         0      15 Numeric       N0                                    4        15 Left                
  D01TRDP*                      Trading Partner ID                                              C         0       9 String        X                                    19         9 Left                
  D01APPI*                      Application ID                                                  C         0       6 String        X                                    28         6 Left                
  D01APPA*                      Application Alias                                               C         0       6 String        X                                    34         6 Left                
  D01TRNT*                      Transaction Type                                                C         0      10 String        X                                    40        10 Left                
  D01TRDR*                      Trader ID                                                       C         0      15 String        X                                    50        15 Left                
  D01IDOC*                      Internal Document                                               C         0      10 String        X                                    65        10 Left                
  D01EAPP*                      External Application                                            C         0      10 String        X                                    75        10 Left                
  D01CLTB*                      Cleint Table                                                    C         0      10 String        X                                    85        10 Left                
  D01CLIE*                      Client ID                                                       C         0      15 String        X                                    95        15 Left                
  D01EDOC*                      External Document                                               C         0      10 String        X                                   110        10 Left                
  D01HAWB*                      HAWB Number                                                     C         0      40 String        X                                   120        40 Left                
  D01MAWB*                      MAWB Number                                                     C         0      40 String        X                                   160        40 Left                
  D01PORD*                      PO Number                                                       C         0      40 String        X                                   200        40 Left                
  D01JOB*                       Job Number                                                      C         0      20 String        X                                   240        20 Left                
  D01CATB*                      Carrier Table                                                   C         0      10 String        X                                   260        10 Left                
  D01CARR*                      Carrier ID                                                      C         0      40 String        X                                   270        40 Left                
  D01CNTB*                      Carrier SCAC Table                                              C         0      10 String        X                                   310        10 Left                
  D01CSCA*                      Carrier SCAC                                                    C         0      25 String        X                                   320        25 Left                
  D01FNTB*                      Forwarder SCAC Table                                            C         0      10 String        X                                   345        10 Left                
  D01FSCA*                      Forwarder SCAC                                                  C         0      40 String        X                                   355        40 Left                
  D01BUSM*                      Business Model                                                  C         0      10 String        X                                   395        10 Left                
  D01HLTB*                      Hierarchical Level Table                                        C         0      10 String        X                                   405        10 Left                
  D01HIER*                      Hierarchical Level                                              C         0      20 String        X                                   415        20 Left                
  D01ICSI*                      Interchange Sender ID                                           C         0      40 String        X                                   435        40 Left                
  D01APSC*                      Application Senders Code                                        C         0      40 String        X                                   475        40 Left                
  D01DSLI*                      Drop Ship Location ID                                           C         0      80 String        X                                   515        80 Left                
  D01ICCN*                      Interchange Control Number                                      C         0      20 String        X                                   595        20 Left                
  D01GPCN*                      Group Control Number                                            C         0      20 String        X                                   615        20 Left                
  D01TRCN*                      Transaction Control Number                                      C         0      20 String        X                                   635        20 Left                
  D01TEST*                      Test                                                            C         0       1 String        X                                   655         1 Left                
  D01PRNT*                      Parent Transaction Number                                       C         0      15 Numeric       N0                                  656        15 Left                
  D01FNKY*                      Foreign Key                                                     C         0      15 Numeric       N0                                  671        15 Left                
                                                                                                                                                                                                        
  Record KEY*                             Tag KEY at 1                            Conditional                                           0             1                                                 
  Key required for linking purposes.                                                                                                                                                                    
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  SOURCEKEY*                    Source Key                                                      C         0      60 String        X                                    19        60 Left                
  CONSIGIDKEY*                  Consignee                                                       C         0      10 String        X                                    79        10 Left                
  JOBNOKEY*                     JOBNO                                                           C         0      10 String        X                                    90        10 Left                
  STATUSKEY*                    Deliverey Status                                                C         0      10 String        X                                   108        10 Left                
  EXTERNALK*                    External Key                                                    C         0      10 String        X                                   139        10 Left                
  JOBNOKEY:2*                   JOBNO                                                           C         0      10 String        X                                   150        10 Left                
                                                                                                                                                                                                        
  Record FECD11P_201*                     Tag 201 at 1                            Mandatory                                             1             1                                                 
  Shipment Details                                                                                                                                                                                      
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  D11TRAN*                      Transaction Number                                              C         0      15 Numeric       N0                                    4        15 Left                
  D11SHKY*                      Shipment Details Key                                            C         0      15 Numeric       N0                                   19        15 Left                
  D11FKSQ*                      Foreign Key Sequence                                            C         0      15 Numeric       N0                                   34        15 Left                
  D11CLTB*                      Client Table                                                    C         0      10 String        X                                    49        10 Left                
  D11CLIE*                      Client ID                                                       C         0      15 String        X                                    59        15 Left                
  D11SLTB*                      Service Level Table                                             C         0      10 String        X                                    74        10 Left                
  D11SRVL*                      Service level                                                   C         0      20 String        X                                    84        20 Left                
  D11STTB*                      Service Type Table                                              C         0      10 String        X                                   104        10 Left                
  D11SRVT*                      Service Type                                                    C         0      20 String        X                                   114        20 Left                
  D11WUTB*                      Weigth UOM Table                                                C         0      10 String        X                                   134        10 Left                
  D11WGTU*                      Weight UOM                                                      C         0       5 String        X                                   144         5 Left                
  D11NETW*                      Nett Weight                                                     C         0      30 Numeric       N9                                  149        30 Left                
  D11GRSW*                      Gross Weight                                                    C         0      30 Numeric       N9                                  179        30 Left                
  D11CHGW*                      Chargeable Weight                                               C         0      30 Numeric       N9                                  209        30 Left                
  D11PKTB*                      Packing Type Table                                              C         0      10 String        X                                   239        10 Left                
  D11PKGT*                      Packing Type                                                    C         0      15 String        X                                   249        15 Left                
  D11DESC*                      Description                                                     C         0      80 String        X                                   264        80 Left                
  D11DCVS*                      Declaration Value Sign                                          C         0       1 String        X                                   344         1 Left                
  D11DCLV*                      Declaration Value                                               C         0      30 Numeric       N9                                  345        30 Left                
  D11DCTB*                      Declaration Currency Table                                      C         0      10 String        X                                   375        10 Left                
  D11DCCU*                      Declaration Currency                                            C         0       5 String        X                                   385         5 Left                
  D11CUVS*                      Customs Value Sign                                              C         0       1 String        X                                   390         1 Left                
  D11CUSV*                      Customs Value                                                   C         0      30 Numeric       N9                                  391        30 Left                
  D11CCTB*                      Customs Currency Table                                          C         0      10 String        X                                   421        10 Left                
  D11CUCU*                      Customs Currency                                                C         0       5 String        X                                   431         5 Left                
  D11CUTB*                      Cubic Measure UOM Table                                         C         0      10 String        X                                   436        10 Left                
  D11CUBU*                      Cubic Measure UOM                                               C         0       5 String        X                                   446         5 Left                
  D11CUBE*                      Cubic Measure                                                   C         0      30 Numeric       N9                                  451        30 Left                
  D11FNKY*                      Foreign Key                                                     C         0      15 Numeric       N0                                  481        15 Left                
                                                                                                                                                                                                        
  Record FECD10P_301*                     Tag 301 at 1                            Conditional                                           0             1                                                 
  Shipment References                                                                                                                                                                                   
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  D10TRAN*                      Transaction Number                                              C         0      15 Numeric       N0                                    4        15 Left                
  D10RFKY*                      Reference Numbers Key                                           C         0      15 Numeric       N0                                   19        15 Left                
  D10FKSQ*                      Foreign Key Sequence                                            C         0      15 Numeric       N0                                   34        15 Left                
  D10RTTB*                      Reference Type Table                                            C         0      10 String        X                                    49        10 Left                
  D10RFTP*                      Reference Type                                                  C         0      10 String        X                                    59        10 Left                
  D10RFNO*                      Reference Number                                                C         0      60 String        X                                    69        60 Left                
  D10DESC*                      Description                                                     C         0      80 String        X                                   129        80 Left                
  D10FNKY*                      Foreign Key                                                     C         0      15 Numeric       N0                                  209        15 Left                
                                                                                                                                                                                                        
  Record FECD10P_414*                     Tag 414 at 1                            Conditional                                           0             1                                                 
  References                                                                                                                                                                                            
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  D10TRAN:4*                    Transaction Number                                              C         0      15 Numeric       N0                                    4        15 Left                
  D10RFKY:4*                    Reference Numbers Key                                           C         0      15 Numeric       N0                                   19        15 Left                
  D10FKSQ:4*                    Foreign Key Sequence                                            C         0      15 Numeric       N0                                   34        15 Left                
  D10RTTB:4*                    Reference Type Table                                            C         0      10 String        X                                    49        10 Left                
  D10RFTP:4*                    Reference Type                                                  C         0      10 String        X                                    59        10 Left                
  D10RFNO:4*                    Reference Number                                                C         0      60 String        X                                    69        60 Left                
  D10DESC:4*                    Description                                                     C         0      80 String        X                                   129        80 Left                
  D10FNKY:4*                    Foreign Key                                                     C         0      15 Numeric       N0                                  209        15 Left                
                                                                                                                                                                                                        
  Record FECD04P_507*                     Tag 507 at 1                            Conditional                                           0             1                                                 
  Quantity                                                                                                                                                                                              
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  D04TRAN*                      Transaction Number                                              C         0      15 Numeric       N0                                    4        15 Left                
  D04QTKY*                      Quantity Key                                                    C         0      15 Numeric       N0                                   19        15 Left                
  D04FKSQ*                      Foreign Key Sequence                                            C         0      15 Numeric       N0                                   34        15 Left                
  D04QTTB*                      Quantity Type Table                                             C         0      10 String        X                                    49        10 Left                
  D04QTYT*                      Quantity Type                                                   C         0      10 String        X                                    59        10 Left                
  D04QUTB*                      Quantity UOM Table                                              C         0      10 String        X                                    69        10 Left                
  D04QTYU*                      Quantity UOM                                                    C         0      20 String        X                                    79        20 Left                
  D04QTYS*                      Quantity Sign                                                   C         0       1 String        X                                    99         1 Left                
  D04QTY*                       Quantity                                                        C         0      30 Numeric       N9                                  100        30 Left                
  D04FNKY*                      Foreign Key                                                     C         0      15 Numeric       N0                                    1         0 Left                
                                                                                                                                                                                                        
  Record FECD05P_302*                     Tag 302 at 1                            Conditional                                           0             1                                                 
  Clients                                                                                                                                                                                               
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  D05TRAN*                      Transaction Number                                              C         0      15 Numeric       N0                                    4        15 Left                
  D05CLKY*                      Client Key                                                      C         0      15 Numeric       N0                                   19        15 Left                
  D05FKSQ*                      Foreign Key Sequence                                            C         0      15 Numeric       N0                                   34        15 Left                
  D05CITB*                      Client Type Table                                               C         0      10 String        X                                    49        10 Left                
  D05CLIT*                      Client Type                                                     C         0      10 String        X                                    59        10 Left                
  D05CLTB*                      Client Table                                                    C         0      10 String        X                                    69        10 Left                
  D05CLIE*                      Client ID                                                       C         0      15 String        X                                    79        15 Left                
  D05FNKY*                      Foreign Key                                                     C         0      15 Numeric       N0                                   94        15 Left                
                                                                                                                                                                                                        
  Record FECD08P_401*                     Tag 401 at 1                            Conditional                                           0             1                                                 
  Names and Addresses                                                                                                                                                                                   
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  D08TRAN*                      Transaction Number                                              C         0      15 Numeric       N0                                    4        15 Left                
  D08NAKY*                      Name and Address Key                                            C         0      15 Numeric       N0                                   19        15 Left                
  D08FKSQ*                      Foreign Key Sequence                                            C         0      15 Numeric       N0                                   34        15 Left                
  D08NAME*                      Name                                                            C         0      60 String                                             49        60 Left                
  D08ADD1*                      Address Line 1                                                  C         0      65 String                                            109        65 Left                
  D08ADD2*                      Address Line 2                                                  C         0      65 String        X                                   174        65 Left                
  D08ADD3*                      Address Line 3                                                  C         0      65 String        X                                   239        65 Left                
  D08ADD4*                      Address Line 4                                                  C         0      65 String        X                                   304        65 Left                
  D08CITB*                      City Table                                                      C         0      10 String        X                                   369        10 Left                
  D08CITY*                      City                                                            C         0      40 String        X                                   379        40 Left                
  D08SETB*                      State Table                                                     C         0      10 String        X                                   419        10 Left                
  D08STAT*                      State                                                           C         0      15 String        X                                   429        15 Left                
  D08POTB*                      Postcode Table                                                  C         0      10 String        X                                   444        10 Left                
  D08POST*                      Postcode                                                        C         0      20 String        X                                   454        20 Left                
  D08CTTB*                      Country Table                                                   C         0      10 String        X                                   474        10 Left                
  D08CTRY*                      Country                                                         C         0       5 String        X                                   484         5 Left                
  D08PHON*                      Phone Number                                                    C         0      50 String        X                                   489        50 Left                
  D08FAX*                       Fax Number                                                      C         0      50 String        X                                   539        50 Left                
  D08EMAD*                      E-mail Address                                                  C         0      80 String        X                                   589        80 Left                
  D08PAGR*                      Pager Number                                                    C         0      50 String        X                                   669        50 Left                
  D08FNKY*                      Foreign Key                                                     C         0      15 Numeric       N0                                  719        15 Left                
                                                                                                                                                                                                        
  Record FECD12P_303*                     Tag 303 at 1                            Conditional                                           0            99                                                 
  Waybill/Port Type Locations                                                                                                                                                                           
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  D12TRAN*                      Transaction Number                                              C         0      15 Numeric       N0                                    4        15 Left                
  D12WBKY*                      Waybill Movement Key                                            C         0      15 Numeric       N0                                   19        15 Left                
  D12FKSQ*                      Foreign Key Sequence                                            C         0      15 Numeric       N0                                   34        15 Left                
  D12WBTB*                      Waybill Type Table                                              C         0      10 String        X                                    49        10 Left                
  D12WAYT*                      Waybill Type                                                    C         0      20 String        X                                    59        20 Left                
  D12PTTB*                      Port Type Table                                                 C         0      10 String        X                                    79        10 Left                
  D12POTP*                      Port Type                                                       C         0      10 String        X                                    89        10 Left                
  D12PCTB*                      Port Code Table                                                 C         0      10 String        X                                    99        10 Left                
  D12PORT*                      Port                                                            C         0      40 String        X                                   109        40 Left                
  D12PORN*                      Port Name                                                       C         0     256 String        X                                   149       256 Left                
  D12FNKY*                      Foreign Key                                                     C         0      15 Numeric       N0                                  405        15 Left                
                                                                                                                                                                                                        
  Record FECD03P_304:2*                   Tag 304 at 1                            Conditional                                           0             1                                                 
  Container                                                                                                                                                                                             
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  D03TRAN:2*                    Transaction Number                                              C         0      15 Numeric       N0                                    4        15 Left                
  D03CNKY:2*                    Container Details key                                           C         0      15 Numeric       N0                                   19        15 Left                
  D03FKSQ:2*                    Foreign Key Sequence                                            C         0      15 Numeric       N0                                   34        15 Left                
  D03CONT:2*                    Container Number                                                C         0      20 String        X                                    49        20 Left                
  D03SEAL:2*                    Seal Number                                                     C         0      20 String        X                                    69        20 Left                
  D03COTB:2*                    Container Type Table                                            C         0      10 String        X                                    89        10 Left                
  D03CNTT:2*                    Container Type                                                  C         0      10 String        X                                    99        10 Left                
  D03FNKY:2*                    Foreign Key                                                     C         0      15 Numeric       N0                                  109        15 Left                
                                                                                                                                                                                                        
  Record FECD14P_416:1*                   Tag 416 at 1                            Conditional                                           0             1                                                 
  Container                                                                                                                                                                                             
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  D14TRAN:1*                    Transaction Number                                              C         0      15 Numeric       N0                                    4        15 Left                
  D14CNKY:1*                    Container Details key                                           C         0      15 Numeric       N0                                   19        15 Left                
  D14FKSQ:1*                    Foreign Key Sequence                                            C         0      15 Numeric       N0                                   34        15 Left                
  D14DMTB:1*                    DIMS                                                            C         0      10 String        X                                    49        10 Left                
  D14DIMT:1*                    JOBDIMS                                                         C         0      10 String        X                                    59        10 Left                
  D14DUTB:1*                    CONTRLDIMS                                                      C         0      10 String        X                                    69        10 Left                
  D14DIMU:1*                    Measure type                                                    C         0       5 String        X                                    79         5 Left                
  D14HIGH:1*                    height                                                          C         0      30 Numeric       R9                                   84        30 Left                
  D14WIDE:1*                    width                                                           C         0      30 Numeric       R9                                  114        30 Left                
  D14LONG:1*                    length                                                          C         0      30 Numeric       R9                                  144        30 Left                
  D14WUTB:1*                    CONTRLWMBU                                                      C         0      10 String        X                                   174        10 Left                
  D14WGTU:1*                    Measure type - weight                                           C         0       5 String        X                                   184         5 Left                
  D14WGHT:1*                    weight                                                          C         0      30 Numeric       R9                                  189        30 Left                
  D14VUTB:1*                    CONTRLVolume                                                    C         0      10 String        X                                   219        10 Left                
  D14VOLU:1*                    Measure type - volume                                           C         0       5 String        X                                   229         5 Left                
  D14VOL:1*                     volume                                                          C         0      30 Numeric       R9                                  234        30 Left                
  D14FNKY:1*                    Foreign Key                                                     C         0      15 Numeric       N0                                  264        15 Left                
                                                                                                                                                                                                        
  Record FECD14P_416:2*                   Tag 416 at 1                            Conditional                                           0             1                                                 
  Container                                                                                                                                                                                             
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  D14TRAN:2*                    Transaction Number                                              C         0      15 Numeric       N0                                    4        15 Left                
  D14CNKY:2*                    Container Details key                                           C         0      15 Numeric       N0                                   19        15 Left                
  D14FKSQ:2*                    Foreign Key Sequence                                            C         0      15 Numeric       N0                                   34        15 Left                
  D14DMTB:2*                    DIMS                                                            C         0      10 String        X                                    49        10 Left                
  D14DIMT:2*                    JOBDIMS                                                         C         0      10 String        X                                    59        10 Left                
  D14DUTB:2*                    CONTRLDIMS                                                      C         0      10 String        X                                    69        10 Left                
  D14DIMU:2*                    Measure type                                                    C         0       5 String        X                                    79         5 Left                
  D14HIGH:2*                    height                                                          C         0      30 Numeric       R9                                   84        30 Left                
  D14WIDE:2*                    width                                                           C         0      30 Numeric       R9                                  114        30 Left                
  D14LONG:2*                    length                                                          C         0      30 Numeric       R9                                  144        30 Left                
  D14WUTB:2*                    CONTRLWMBU                                                      C         0      10 String        X                                   174        10 Left                
  D14WGTU:2*                    Measure type - weight                                           C         0       5 String        X                                   184         5 Left                
  D14WGHT:2*                    weight                                                          C         0      30 Numeric       R9                                  189        30 Left                
  D14VUTB:2*                    CONTRLVolume                                                    C         0      10 String        X                                   219        10 Left                
  D14VOLU:2*                    Measure type - volume                                           C         0       5 String        X                                   229         5 Left                
  D14VOL:2*                     volume                                                          C         0      30 Numeric       R9                                  234        30 Left                
  D14FNKY:2*                    Foreign Key                                                     C         0      15 Numeric       N0                                  264        15 Left                
                                                                                                                                                                                                        
  Record FECD04P_305*                     Tag 305 at 1                            Conditional                                           0             9                                                 
  Quantity                                                                                                                                                                                              
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  D04TRAN:4*                    Transaction Number                                              C         0      15 Numeric       N0                                    4        15 Left                
  D04QTKY:4*                    Quantity Key                                                    C         0      15 Numeric       N0                                   19        15 Left                
  D04FKSQ:4*                    Foreign Key Sequence                                            C         0      15 Numeric       N0                                   34        15 Left                
  D04QTTB:4*                    Quantity Type Table                                             C         0      10 String        X                                    49        10 Left                
  D04QTYT:4*                    Quantity Type                                                   C         0      10 String        X                                    59        10 Left                
  D04QUTB:4*                    Quantity UOM Table                                              C         0      10 String        X                                    69        10 Left                
  D04QTYU:4*                    Quantity UOM                                                    C         0      20 String        X                                    79        20 Left                
  D04QTYS:4*                    Quantity Sign                                                   C         0       1 String        X                                    99         1 Left                
  D04QTY:4*                     Quantity                                                        C         0      30 Numeric       N9                                  100        30 Left                
  D04FNKY:4*                    Foreign Key                                                     C         0      15 Numeric       N0                                  130        15 Left                
                                                                                                                                                                                                        
  Record FECD04P_402*                     Tag 402 at 1                            Conditional                                           0             1                                                 
  Weights                                                                                                                                                                                               
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  D04TRAN:5*                    Transaction Number                                              C         0      15 Numeric       N0                                    4        15 Left                
  D04QTKY:5*                    Quantity Key                                                    C         0      15 Numeric       N0                                   19        15 Left                
  D04FKSQ:5*                    Foreign Key Sequence                                            C         0      15 Numeric       N0                                   34        15 Left                
  D04QTTB:5*                    Quantity Type Table                                             C         0      10 String        X                                    49        10 Left                
  D04QTYT:5*                    Quantity Type                                                   C         0      10 String        X                                    59        10 Left                
  D04QUTB:5*                    Quantity UOM Table                                              C         0      10 String        X                                    69        10 Left                
  D04QTYU:5*                    Quantity UOM                                                    C         0      20 String        X                                    79        20 Left                
  D04QTYS:5*                    Quantity Sign                                                   C         0       1 String        X                                    99         1 Left                
  D04QTY:6*                     Quantity                                                        C         0      30 Numeric       N9                                  100        30 Left                
  D04FNKY:5*                    Foreign Key                                                     C         0      15 Numeric       N0                                  130        15 Left                
                                                                                                                                                                                                        
  Record FECD02P_306*                     Tag 306 at 1                            Conditional                                           0             1                                                 
  Mode of Transport/Service Level                                                                                                                                                                       
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  D02TRAN*                      Transaction Number                                              C         0      15 Numeric       N0                                    4        15 Left                
  D02TRKY*                      Transport Details key                                           C         0      15 Numeric       N0                                   19        15 Left                
  D02FKSQ*                      Foreign Key Sequence                                            C         0      15 Numeric       N0                                   34        15 Left                
  D02FLTV*                      Flight/Voyage Number                                            C         0      40 String        X                                    49        40 Left                
  D02FLTV2*                     Flight/Voyage Number                                            C         0      40 String        X                                    89        40 Left                
  D02CATB*                      89 Carrier Table                                                C         0      10 String        X                                   129        10 Left                
  D02CARR*                      Carrier ID                                                      C         0      40 String        X                                   139        40 Left                
  D02MOTB*                      Mode Table                                                      C         0      10 String        X                                   179        10 Left                
  D02MODE*                      Mode                                                            C         0      20 String        X                                   189        20 Left                
  D02SLTB*                      Service Level Table                                             C         0      10 String        X                                   209        10 Left                
  D02SRVL*                      Service Level                                                   C         0      20 String        X                                   219        20 Left                
  D02FNKY*                      Foreign Key                                                     C         0      15 Numeric       N0                                  239        15 Left                
                                                                                                                                                                                                        
  Record FECD10P_403*                     Tag 403 at 1                            Conditional                                           0             1                                                 
  References                                                                                                                                                                                            
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  D10TRAN:2*                    Transaction Number                                              C         0      15 Numeric       N0                                    4        15 Left                
  D10RFKY:2*                    Reference Numbers Key                                           C         0      15 Numeric       N0                                   19        15 Left                
  D10FKSQ:2*                    Foreign Key Sequence                                            C         0      15 Numeric       N0                                   34        15 Left                
  D10RTTB:2*                    Reference Type Table                                            C         0      10 String        X                                    49        10 Left                
  D10RFTP:2*                    Reference Type                                                  C         0      10 String        X                                    59        10 Left                
  D10RFNO:2*                    Reference Number                                                C         0      60 String        X                                    69        60 Left                
  D10DESC:2*                    Description                                                     C         0      80 String        X                                   129        80 Left                
  D10FNKY:2*                    Foreign Key                                                     C         0      15 Numeric       N0                                  209        15 Left                
                                                                                                                                                                                                        
  Record FECD06P_307*                     Tag 307 at 1                            Conditional                                           0            99                                                 
  Status                                                                                                                                                                                                
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  D06TRAN*                      Transaction Number                                              C         0      15 Numeric       N0                                    4        15 Left                
  D06STKY*                      Status Key                                                      C         0      15 Numeric       N0                                   19        15 Left                
  D06FKSQ*                      Foreign Key Sequence                                            C         0      15 Numeric       N0                                   34        15 Left                
  D06STSD*                      Status Date                                                     C         0       8 String        X                                    49         8 Left                
  D06STST*                      Status Time                                                     C         0       6 String        X                                    57         6 Left                
  D06SCTB*                      Status Code Table                                               C         0      10 String        X                                    63        10 Left                
  D06STSC*                      Status Code                                                     C         0      10 String        X                                    73        10 Left                
  D06SIGN*                      Signature                                                       C         0      60 String        X                                    83        60 Left                
  D06UPDD*                      Update Date                                                     C         0       8 Numeric       N0                                  143         8 Left                
  D06UPDT*                      Update time                                                     C         0       6 Numeric       N0                                  151         6 Left                
  D06FNKY*                      Foreign Key                                                     C         0      15 Numeric       N0                                  157        15 Left                
                                                                                                                                                                                                        
  Record FECD13P_308:2*                   Tag 308 at 1                            Conditional                                           0             1                                                 
  Notes                                                                                                                                                                                                 
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  D13TRAN:2*                    Transaction Number                                              C         0      15 Numeric       N0                                    4        15 Left                
  D13NTKY:2*                    Notes Key                                                       C         0      15 Numeric       N0                                   19        15 Left                
  D13FKSQ:2*                    Foreign Key Sequence                                            C         0      15 Numeric       N0                                   34        15 Left                
  D13NTTB:2*                    Notes Type Table                                                C         0      10 String        X                                    49        10 Left                
  D13NOTP:2*                    Notes Type                                                      C         0      10 String        X                                    59        10 Left                
  D13NOTE:2*                    Notes                                                           C         0     512 String                                             69       512 Left                
  D13FNKY:2*                    Foreign Key                                                     C         0      15 Numeric       N0                                  581        15 Left                
                                                                                                                                                                                                        
  Record FECD07P_309*                     Tag 309 at 1                            Conditional                                           0             1                                                 
  Charges                                                                                                                                                                                               
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  D07TRAN*                      Transaction Number                                              C         0      15 String        X                                     4        15 Left                
  D07CHKY*                      Charges Key                                                     C         0      15 String        X                                    19        15 Left                
  D07FKSQ*                      Foreign Key Sequence                                            C         0      15 String        X                                    34        15 Left                
  D07PYTB*                      Payment Type Table                                              C         0      10 String        X                                    49        10 Left                
  D07PAYT*                      Payment Type                                                    C         0       5 String        X                                    59         5 Left                
  D07CHTB*                      Charge Code Table                                               C         0      10 String        X                                    64        10 Left                
  D07CHGC*                      Charge Code                                                     C         0      10 String        X                                    74        10 Left                
  D07CHAS*                      Charge Amount Sign                                              C         0       1 String        X                                    84         1 Left                
  D07CHGA*                      Charge Amount                                                   C         0      30 Numeric       N9                                   85        30 Left                
  D07CYTB*                      Charge Currency Table                                           C         0      10 String        X                                   115        10 Left                
  D07CHCU*                      Charge Currency                                                 C         0       5 String        X                                   125         5 Left                
  D07PMTB*                      Payment Terms Table                                             C         0      10 String        X                                   130        10 Left                
  D07PTRM*                      Payment Terms                                                   C         0      35 String        X                                   140        35 Left                
  D07FNKY*                      Foreign Key                                                     C         0      15 String        X                                   175        15 Left                
                                                                                                                                                                                                        
  Record FECD10P_310*                     Tag 310 at 1                            Conditional                                           0             1                                                 
  Quantity                                                                                                                                                                                              
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  D04TRAN:3*                    Transaction Number                                              C         0      15 Numeric       N0                                    4        15 Left                
  D04QTKY:3*                    Quantity Key                                                    C         0      15 Numeric       N0                                   19        15 Left                
  D04FKSQ:3*                    Foreign Key Sequence                                            C         0      15 Numeric       N0                                   34        15 Left                
  D04QTTB:3*                    Quantity Type Table                                             C         0      10 String        X                                    49        10 Left                
  D04QTYT:3*                    Quantity Type                                                   C         0      10 String        X                                    59        10 Left                
  D04QUTB:3*                    Quantity UOM Table                                              C         0      10 String        X                                    69        10 Left                
  D04QTYU:3*                    Quantity UOM                                                    C         0      20 String        X                                    79        20 Left                
  D04QTYS:3*                    Quantity Sign                                                   C         0       1 String        X                                    99         1 Left                
  D04QTY:5*                     Quantity                                                        C         0      30 Numeric       N9                                  100        30 Left                
  D04FNKY:3*                    Foreign Key                                                     C         0      15 Numeric       N0                                  130        15 Left                
                                                                                                                                                                                                        
  Record FECD04P_404*                     Tag 404 at 1                            Conditional                                           0             1                                                 
  References                                                                                                                                                                                            
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  D10TRAN:5*                    Transaction Number                                              C         0      15 Numeric       N0                                    4        15 Left                
  D10RFKY:5*                    Reference Numbers Key                                           C         0      15 Numeric       N0                                   19        15 Left                
  D10FKSQ:5*                    Foreign Key Sequence                                            C         0      15 Numeric       N0                                   34        15 Left                
  D10RTTB:5*                    Reference Type Table                                            C         0      10 String        X                                    49        10 Left                
  D10RFTP:5*                    Reference Type                                                  C         0      10 String        X                                    59        10 Left                
  D10RFNO:5*                    Reference Number                                                C         0      60 String        X                                    69        60 Left                
  D10DESC:5*                    Description                                                     C         0      80 String        X                                   129        80 Left                
  D10FNKY:5*                    Foreign Key                                                     C         0      15 Numeric       N0                                  209        15 Left                
                                                                                                                                                                                                        
  Record FECD04P_311*                     Tag 311 at 1                            Conditional                                           0             1                                                 
  Quantity                                                                                                                                                                                              
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  D04TRAN:6*                    Transaction Number                                              C         0      15 Numeric       N0                                    4        15 Left                
  D04QTKY:6*                    Quantity Key                                                    C         0      15 Numeric       N0                                   19        15 Left                
  D04FKSQ:6*                    Foreign Key Sequence                                            C         0      15 Numeric       N0                                   34        15 Left                
  D04QTTB:6*                    Quantity Type Table                                             C         0      10 String        X                                    49        10 Left                
  D04QTYT:6*                    Quantity Type                                                   C         0      10 String        X                                    59        10 Left                
  D04QUTB:6*                    Quantity UOM Table                                              C         0      10 String        X                                    69        10 Left                
  D04QTYU:6*                    Quantity UOM                                                    C         0      20 String        X                                    79        20 Left                
  D04QTYS:6*                    Quantity Sign                                                   C         0       1 String        X                                    99         1 Left                
  D04QTY:7*                     Quantity                                                        C         0      30 Numeric       N9                                  100        30 Left                
  D04FNKY:6*                    Foreign Key                                                     C         0      15 Numeric       N0                                  130        15 Left                
                                                                                                                                                                                                        
  Record FECD14P_405*                     Tag 405 at 1                            Conditional                                           0            99                                                 
  Quantities                                                                                                                                                                                            
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  D14TRAN:3*                    Transaction Number                                              C         0      15 Numeric       N0                                    4        15 Left                
  D14CNKY:3*                    Container Details key                                           C         0      15 Numeric       N0                                   19        15 Left                
  D14FKSQ:3*                    Foreign Key Sequence                                            C         0      15 Numeric       N0                                   34        15 Left                
  D14DMTB:3*                    DIMS                                                            C         0      10 String        X                                    49        10 Left                
  D14DIMT:3*                    JOBDIMS                                                         C         0      10 String        X                                    59        10 Left                
  D14DUTB:3*                    CONTRLDIMS                                                      C         0      10 String        X                                    69        10 Left                
  D14DIMU:3*                    Measure type                                                    C         0       5 String        X                                    79         5 Left                
  D14HIGH:3*                    height                                                          C         0      30 Numeric       N9                                   84        30 Left                
  D14WIDE:3*                    width                                                           C         0      30 Numeric       N9                                  114        30 Left                
  D14LONG:3*                    length                                                          C         0      30 Numeric       N9                                  144        30 Left                
  D14WUTB:3*                    CONTRLWMBU                                                      C         0      10 String        X                                   174        10 Left                
  D14WGTU:3*                    Measure type - weight                                           C         0       5 String        X                                   184         5 Left                
  D14WGHT:3*                    weight                                                          C         0      30 Numeric       N9                                  189        30 Left                
  D14VUTB:3*                    CONTRLVolume                                                    C         0      10 String        X                                   219        10 Left                
  D14VOLU:3*                    Measure type - volume                                           C         0       5 String        X                                   229         5 Left                
  D14VOL:3*                     volume                                                          C         0      30 Numeric       N9                                  234        30 Left                
  D14FNKY:3*                    Foreign Key                                                     C         0      15 Numeric       N0                                  264        15 Left                
                                                                                                                                                                                                        
  Record FECD04P_312*                     Tag 312 at 1                            Conditional                                           0             1                                                 
  Hazardous Pieces                                                                                                                                                                                      
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  D04TRAN:7*                    Transaction Number                                              C         0      15 Numeric       N0                                    4        15 Left                
  D04QTKY:7*                    Quantity Key                                                    C         0      15 Numeric       N0                                   19        15 Left                
  D04FKSQ:7*                    Foreign Key Sequence                                            C         0      15 Numeric       N0                                   34        15 Left                
  D04QTTB:7*                    Quantity Type Table                                             C         0      10 String        X                                    49        10 Left                
  D04QTYT:7*                    Quantity Type                                                   C         0      10 String        X                                    59        10 Left                
  D04QUTB:7*                    Quantity UOM Table                                              C         0      10 String        X                                    69        10 Left                
  D04QTYU:7*                    Quantity UOM                                                    C         0      20 String        X                                    79        20 Left                
  D04QTYS:7*                    Quantity Sign                                                   C         0       1 String        X                                    99         1 Left                
  D04QTY:8*                     Quantity                                                        C         0      30 Numeric       N9                                  100        30 Left                
  D04FNKY:7*                    Foreign Key                                                     C         0      15 Numeric       N0                                  130        15 Left                
                                                                                                                                                                                                        
  Record FECD04P_406*                     Tag 406 at 1                            Conditional                                           0             9                                                 
  Quantity                                                                                                                                                                                              
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  D04TRAN:8*                    Transaction Number                                              C         0      15 Numeric       N0                                    4        15 Left                
  D04QTKY:8*                    Quantity Key                                                    C         0      15 Numeric       N0                                   19        15 Left                
  D04FKSQ:8*                    Foreign Key Sequence                                            C         0      15 Numeric       N0                                   34        15 Left                
  D04QTTB:8*                    Quantity Type Table                                             C         0      10 String        X                                    49        10 Left                
  D04QTYT:8*                    Quantity Type                                                   C         0      10 String        X                                    59        10 Left                
  D04QUTB:8*                    Quantity UOM Table                                              C         0      10 String        X                                    69        10 Left                
  D04QTYU:8*                    Quantity UOM                                                    C         0      20 String        X                                    79        20 Left                
  D04QTYS:8*                    Quantity Sign                                                   C         0       1 String        X                                    99         1 Left                
  D04QTY:9*                     Quantity                                                        C         0      30 Numeric       N9                                  100        30 Left                
  D04FNKY:8*                    Foreign Key                                                     C         0      15 Numeric       N0                                  130        15 Left                
                                                                                                                                                                                                        
  Record FECD10P_407*                     Tag 407 at 1                            Conditional                                           0             1                                                 
  References                                                                                                                                                                                            
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  D10TRAN:18*                   Transaction Number                                              C         0      15 Numeric       N0                                    4        15 Left                
  D10RFKY:18*                   Reference Numbers Key                                           C         0      15 Numeric       N0                                   19        15 Left                
  D10FKSQ:18*                   Foreign Key Sequence                                            C         0      15 Numeric       N0                                   34        15 Left                
  D10RTTB:18*                   Reference Type Table                                            C         0      10 String        X                                    49        10 Left                
  D10RFTP:18*                   Reference Type                                                  C         0      10 String        X                                    59        10 Left                
  D10RFNO:18*                   Reference Number                                                C         0      60 String        X                                    69        60 Left                
  D10DESC:18*                   Description                                                     C         0      80 String        X                                   129        80 Left                
  D10FNKY:18*                   Foreign Key                                                     C         0      15 Numeric       N0                                  209        15 Left                
                                                                                                                                                                                                        
  Record TMP201*                          Tag $$$ at 1                            Conditional                                           0             1                                                 
                                                                                                                                                                                                        
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  TMP_TOTALGW*                  Total Gross Weight                                              C         0       9 Numeric       R2                                    4         9 Left                
  TMP_TOTALNW*                  Total Net Weight                                                C         0       9 Numeric       R2                                   13         9 Left                
  TMP_TOTALCB*                  Total Cube                                                      C         0       9 Numeric       R3                                   22         9 Left                
                                                                                                                                                                                                        
  Record TMP101*                          Tag $$$ at 1                            Conditional                                           0             1                                                 
                                                                                                                                                                                                        
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  TMP_JOBNO*                    Job Number                                                      C         0      17 String        X                                     4        17 Left                
  TMP_CONSID*                   Consignment ID                                                  C         0      10 String        X                                    21        10 Left                
  TMP_MAWBNO*                   Master Job                                                      C         0      17 String        X                                    31        17 Left                
  TMP_DIR*                                                                                      C         0       1 Numeric       N0                                   48         1 Left                
  TMP_DOCNO*                    Document number                                                 C         0       3 String        X                                    49         3 Left                
                                                                                                                                                                                                        
  Record TMP302_401LOOP*                  Tag $$$ at 1                            Conditional                                           0            98                                                 
                                                                                                                                                                                                        
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  TMP_CLNTTYP*                  Client Type                                                     C         0       2 String        X                                     4         2 Left                
  TMP_CLNTID*                   Client ID                                                       C         0      10 String        X                                     6        10 Left                
  TEMP_NAME*                    Name                                                            C         0      35 String        X                                    16        35 Left                
  TEMP_ADD1*                    Address Line                                                    C         0      35 String        X                                    51        35 Left                
  TEMP_ADD2*                    Address Line                                                    C         0      35 String        X                                    86        35 Left                
  TEMP_ADD3*                    Address Line                                                    C         0      35 String        X                                   121        35 Left                
  TEMP_ADD4*                    Address Line                                                    C         0      35 String        X                                   156        35 Left                
  TEMP_POSTCD*                  Post Code                                                       C         0       9 String        X                                   191         9 Left                
  TEMP_TOWNCD*                  Town Code                                                       C         0      10 String        X                                   200        10 Left                
  TEMP_COUNCD*                  Country Code                                                    C         0       4 String        X                                   210         4 Left                
  TEMP_PHONE*                   Telephone                                                       C         0      17 String        X                                   214        17 Left                
  TEMP_FAX*                     Fax                                                             C         0      17 String        X                                   231        17 Left                
  TEMP_EMAIL*                   Email Address                                                   C         0      50 String        X                                   248        50 Left                
  TEMP_CONT*                    Contact                                                         C         0      35 String        X                                   298        35 Left                
                                                                                                                                                                                                        
  Record TMP303_302*                      Tag $$$ at 1                            Conditional                                           0             1                                                 
                                                                                                                                                                                                        
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  TMP_FROMCC*                   Port                                                            C         0      40 String        X                                     4        40 Left                
  TMP_FROMLC*                   Client ID                                                       C         0      15 String        X                                    44        15 Left                
  TMP_TOCC*                     Port                                                            C         0      40 String        X                                    59        40 Left                
  TMP_TOLC*                     Client ID                                                       C         0      15 String        X                                    99        15 Left                
                                                                                                                                                                                                        
  Record TMP_304*                         Tag $$$ at 1                            Conditional                                           0             1                                                 
                                                                                                                                                                                                        
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  TMP_UNITNO*                   Unit Number                                                     C         0      17 String        X                                     4        17 Left                
  TMP_UNITTYP*                  Unit Type                                                       C         0       3 String        X                                    21         3 Left                
  TMP_SEALNO*                   Seal Number                                                     C         0      17 String        X                                    24        17 Left                
                                                                                                                                                                                                        
  Record TMP301*                          Tag $$$ at 1                            Conditional                                           0             1                                                 
                                                                                                                                                                                                        
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  TMP_INCOTM*                   Inco Terms                                                      C         0       3 String        X                                     4         3 Left                
  TMP_COLREF*                   Document number                                                 C         0      35 String        X                                    49        35 Left                
  TMP_DELREF*                   Document number                                                 C         0      35 String        X                                    49        35 Left                
                                                                                                                                                                                                        
  Record TMP307*                          Tag  at 1                               Conditional                                           0             1                                                 
                                                                                                                                                                                                        
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  TMP_DEPDATE1*                 Departure Date 1                                                C         0       9 Date/Time     YYYYMMDD                              1         9 Left                
  TMP_ARRDATE1*                 Arrival Date 1                                                  C         0       9 Date/Time     YYYYMMDD                             10         9 Left                
  TMP_COLDATE*                  Collection Date                                                 C         0       9 Date/Time     YYYYMMDD                             19         9 Left                
  TMP_DELDATE*                  Delivery Date                                                   C         0       9 Date/Time     YYYYMMDD                             28         9 Left                
  TMP_COLTIMEFM*                Collection Time From                                            C         0       4 Date/Time     HHMM                                 37         4 Left                
  TMP_COLTIMETO*                Collection Time To                                              C         0       4 Date/Time     HHMM                                 41         4 Left                
  TMP_DELTIMEFM*                Delivery Time From                                              C         0       4 Date/Time     HHMM                                 45         4 Left                
  TMP_DELTIMETO*                Delivery Time To                                                C         0       4 Date/Time     HHMM                                 49         4 Left                
                                                                                                                                                                                                        
  Record TMP308Loop*                      Tag $$$ at 1                            Conditional                                           0            50                                                 
                                                                                                                                                                                                        
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  TMP_INST*                     Instructions                                                    C         0      75 String        X                                     4        75 Left                
                                                                                                                                                                                                        
  Record TMP308Loop:2*                    Tag $$$ at 1                            Conditional                                           0            50                                                 
                                                                                                                                                                                                        
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  TMP_INST:2*                   Instructions                                                    C         0      75 String        X                                     4        75 Left                
                                                                                                                                                                                                        
  Record TMP310_404Loop*                  Tag $$$ at 1                            Conditional                                           0            99                                                 
                                                                                                                                                                                                        
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  TMP_MARKS*                    Marks And Numbers                                               C         0      17 String        X                                     4        17 Left                
  TMP_PIECES*                   Pieces                                                          C         0       7 Numeric       N0                                   21         7 Right               
  TMP_PACK*                     Package Type                                                    C         0       4 String        X                                    28         4 Left                
  TMP_DESC*                     Description                                                     C         0      26 String        X                                    32        26 Left                
  TMP_BAR*                      Bar Record                                                      C         0       9 String        X                                    58         9 Left                
                                                                                                                                                                                                        
  Record TMP311_405Loop*                  Tag $$$ at 1                            Conditional                                           0            99                                                 
                                                                                                                                                                                                        
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  TMP_PIECES:2*                 Pieces                                                          C         0       7 Numeric       N0                                    4         7 Right               
  TMP_PACK:2*                   Package Type                                                    C         0       4 String        X                                    11         4 Left                
  TMP_LENGTH*                   Length                                                          C         0       7 Numeric       N4                                   15         7 Right               
  TMP_WIDTH*                    Width                                                           C         0       7 Numeric       N4                                   22         7 Right               
  TMP_HIGHT*                    Height                                                          C         0       7 Numeric       N4                                   29         7 Right               
  TMP_TOTALGW:2*                Total Gross Weight                                              C         0       9 Numeric       N2                                   36         9 Right               
  TMP_TOTALNW:2*                Total Net Weight                                                C         0       9 Numeric       N2                                   45         9 Right               
  TMP_CUBED*                    Cube                                                            C         0       9 Numeric       N3                                   54         9 Right               
                                                                                                                                                                                                        
  Record TMP310*                          Tag $$$ at 1                            Conditional                                           0             1                                                 
                                                                                                                                                                                                        
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  TMP_TOTALPCS*                 Total Pieces                                                    C         0       7 Numeric       N0                                    4         7 Left                
                                                                                                                                                                                                        
  OUTPUT Record Details                                                                                                                                                                                 
  ---------------------                                                                                                                                                                                 
                                                                                                                                                                                                        
  Record HDI*                             Tag HDI at 1                            Conditional                                           0             1                                                 
  Header Record                                                                                                                                                                                         
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  JOBNO*                        Job Number                                                      C         0      17 String        X                                     4        17 Left                
  CONSID*                       Consignment ID                                                  C         0      10 String        X                                    21        10 Left                
  MAWBNO*                       Master Job                                                      C         0      17 String        X                                    31        17 Left                
  MASTER*                                                                                       C         0       1 Numeric       N0                                   48         1 Left                
  DIRECTION*                                                                                    C         0       1 Numeric       N0                                   49         1 Left                
  MODE*                                                                                         C         0       1 Numeric       N0                                   50         1 Left                
  COLWH*                        Collection On Wheels                                            C         0       1 Numeric       N0                                   51         1 Left                
  DELWH*                        Delivery On Wheels                                              C         0       1 Numeric       N0                                   52         1 Left                
  FROMCC*                       From Country Code                                               C         0       3 String        X                                    53         3 Left                
  FROMLC*                       From Location Code                                              C         0       4 String        X                                    56         4 Left                
  TOCC*                         To Country Code                                                 C         0       3 String        X                                    60         3 Left                
  TOLC*                         To Location Code                                                C         0       4 String        X                                    63         4 Left                
  PRODUCT*                      Product                                                         C         0      17 String        X                                    67        17 Left                
  LOADMT*                       Load Metres                                                     C         0       9 Numeric       R2                                   84         9 Right               
  TAXWG*                        Tax Weight                                                      C         0       9 Numeric       R2                                   93         9 Right               
  INCOTM*                       Inco Terms                                                      C         0       3 String        X                                   102         3 Left                
  CAR*                          Carrier                                                         C         0       5 String        X                                   105         5 Left                
  CARREF*                       Carrier Reference                                               C         0      17 String        X                                   110        17 Left                
  INVVAL*                       Invoice Value                                                   C         0      11 Numeric       R2                                  127        11 Right               
  INVVALCC*                     Invoice Value Currency Code                                     C         0       3 String        X                                   138         3 Left                
  ORIGCTRY*                     Country of Origin                                               C         0       3 String        X                                   141         3 Left                
  FINALDST*                     Final Destination                                               C         0      35 String        X                                   144        35 Left                
  EXITCC*                       Airport/Port of exit country code                               C         0       3 String        X                                   179         3 Left                
  EXITLC*                       Airport/Port of exit location code                              C         0       4 String        X                                   182         4 Left                
  ARRCC*                        Airport/Port of arrival country code                            C         0       3 String        X                                   186         3 Left                
  ARRLC*                        Airport/Port of arrival location code                           C         0       4 String        X                                   189         4 Left                
  VESFL1*                       Vessel/Flight 1                                                 C         0      17 String        X                                   193        17 Left                
  VESFL2*                       Vessel/Flight 2                                                 C         0      17 String        X                                   210        17 Left                
  DEPDATE1*                     Departure Date 1                                                C         0       9 Date/Time     YYYYMMDD                            227         9 Right               
  DEPDATE2*                     Departure Date 2                                                C         0       9 Numeric       N0                                  236         9 Right               
  ARRDATE1*                     Arrival Date 1                                                  C         0       9 Date/Time     YYYYMMDD                            245         9 Right               
  ARRDATE2*                     Arrival Date 2                                                  C         0       9 Numeric       N0                                  254         9 Right               
  DOCNO*                        Document number                                                 C         0       3 String        X                                   263         3 Right               
  COLDATE*                      Collection Date                                                 C         0       9 Date/Time     YYYYMMDD                            266         9 Right               
  DELDATE*                      Delivery Date                                                   C         0       9 Date/Time     YYYYMMDD                            275         9 Right               
  COLTIMEFM*                    Collection Time From                                            C         0       4 Date/Time     HHMM                                284         4 Right               
  COLTIMETO*                    Collection Time To                                              C         0       4 Date/Time     HHMM                                288         4 Right               
  DELTIMEFM*                    Delivery Time From                                              C         0       4 Date/Time     HHMM                                292         4 Right               
  DELTIMETO*                    Delivery Time To                                                C         0       4 Date/Time     HHMM                                296         4 Right               
  TOTALPCS*                     Total Pieces                                                    C         0       7 Numeric       N0                                  300         7 Right               
  TOTALGW*                      Total Gross Weight                                              C         0       9 Numeric       N2                                  307         9 Right               
  TOTALNW*                      Total Net Weight                                                C         0       9 Numeric       N2                                  316         9 Right               
  TOTALCB*                      Total Cube                                                      C         0       9 Numeric       N3                                  325         9 Right               
  COLREF*                       Document number                                                 C         0      35 String        X                                   334        35 Left                
  DELREF:2*                     Document number                                                 C         0      35 String        X                                   369        35 Left                
                                                                                                                                                                                                        
  Record ADR*                             Tag ADR at 1                            Conditional                                           0            98                                                 
  Address Record                                                                                                                                                                                        
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  CLNTTYP*                      Client Type                                                     C         0       2 String        X                                     4         2 Left                
  CLNTID*                       Client ID                                                       C         0      10 String        X                                     6        10 Left                
  NAME*                         Name                                                            C         0      35 String        X                                    16        35 Left                
  ADD1*                         Address Line                                                    C         0      35 String        X                                    51        35 Left                
  ADD2*                         Address Line                                                    C         0      35 String        X                                    86        35 Left                
  ADD3*                         Address Line                                                    C         0      35 String        X                                   121        35 Left                
  ADD4*                         Address Line                                                    C         0      35 String        X                                   156        35 Left                
  POSTCD*                       Post Code                                                       C         0       9 String        X                                   191         9 Left                
  TOWNCD*                       Town Code                                                       C         0      10 String        X                                   200        10 Left                
  LANCD*                        Land Code                                                       C         0       4 String        X                                   210         4 Left                
  COUNCD*                       Country Code                                                    C         0       4 String        X                                   214         4 Left                
  PHONE*                        Telephone                                                       C         0      17 String        X                                   218        17 Left                
  FAX*                          Fax                                                             C         0      17 String        X                                   235        17 Left                
  COUNVAT*                      Country of VAT registration                                     C         0       2 String        X                                   252         2 Left                
  VATNO*                        VAT Number                                                      C         0      18 String        X                                   254        18 Left                
  EMAIL*                        Email Address                                                   C         0      50 String        X                                   272        50 Left                
  CONT*                         Contact                                                         C         0      35 String        X                                   322        35 Left                
                                                                                                                                                                                                        
  Record SHP*                             Tag SHP at 1                            Conditional                                           0            99                                                 
  Shipment Record                                                                                                                                                                                       
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  SEQ*                          Sequence                                                        C         0       5 Numeric       N0                                    4         5 Right               
                                LOOP COUNT          SHP                                                                                                                                                 
  MARKS*                        Marks And Numbers                                               C         0      17 String        X                                     9        17 Left                
  PIECES*                       Pieces                                                          C         0       7 Numeric       N0                                   26         7 Right               
  PACK*                         Package Type                                                    C         0       4 String        X                                    33         4 Left                
  DESC*                         Description                                                     C         0      26 String        X                                    37        26 Left                
                                                                                                                                                                                                        
  Record DIM*                             Tag DIM at 1                            Conditional                                           0            99                                                 
  Dimensions Record                                                                                                                                                                                     
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  SEQ:2*                        Sequence                                                        C         0       5 Numeric       N0                                    4         5 Right               
                                LOOP COUNT          DIM                                                                                                                                                 
  PIECES:2*                     Pieces                                                          C         0       7 Numeric       N0                                    9         7 Right               
  PACK:2*                       Package Type                                                    C         0       4 String        X                                    16         4 Left                
  LENGTH*                       Length                                                          C         0       7 Numeric       N4                                   20         7 Right               
  WIDTH*                        Width                                                           C         0       7 Numeric       N4                                   27         7 Right               
  HIGHT*                        Height                                                          C         0       7 Numeric       N4                                   34         7 Right               
  TOTALGW:2*                    Total Gross Weight                                              C         0       9 Numeric       N2                                   41         9 Right               
  TOTALNW:2*                    Total Net Weight                                                C         0       9 Numeric       N2                                   50         9 Right               
  CUBED*                        Cube                                                            C         0       9 Numeric       N3                                   59         9 Right               
                                                                                                                                                                                                        
  Record UNI*                             Tag UNI at 1                            Conditional                                           0             1                                                 
  Units Record                                                                                                                                                                                          
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  LINNO*                        Line Number                                                     C         0       5 Numeric       N0                                    4         5 Right               
                                LOOP COUNT          Job                                                                                                                                                 
  UNITNO*                       Unit Number                                                     C         0      17 String        X                                     9        17 Left                
  UNITTYP*                      Unit Type                                                       C         0       3 String        X                                    26         3 Left                
  SEALNO*                       Seal Number                                                     C         0      17 String        X                                    29        17 Left                
                                                                                                                                                                                                        
  Record HDL*                             Tag HDL at 1                            Conditional                                           0            50                                                 
  Handling Instructions Record                                                                                                                                                                          
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  SEQ:3*                        Sequence                                                        C         0       5 Numeric       N0                                    4         5 Right               
                                LOOP COUNT          HDL                                                                                                                                                 
  INST*                         Instructions                                                    C         0      75 String        X                                     9        75 Left                
                                                                                                                                                                                                        
  Record SPL*                             Tag SPL at 1                            Conditional                                           0            50                                                 
  Special Instructions Record                                                                                                                                                                           
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------            
  SEQ:4*                        Sequence                                                        C         0       5 Numeric       N0                                    4         5 Right               
                                LOOP COUNT          SPL                                                                                                                                                 
  INST:2*                       Instructions                                                    C         0      75 String        X                                     9        75 Left                
                                                                                                                                                                                                        
  Mapping Information                                                                                                                                                                                   
  -------------------                                                                                                       //The Below shows the links between the input and output variables                                                                            
                                                                                                                                                                                                        
  Record TMP201*                                                                                                                                                                                        
  --------------                                                                                                                                                                                        
  TMP_TOTALGW*                              ----->    HDI*                        TOTALGW                                                                                                               
  TMP_TOTALNW*                              ----->    HDI*                        TOTALNW                                                                                                               
  TMP_TOTALCB*                              ----->    HDI*                        TOTALCB                                                                                                               
                                                                                                                                                                                                        
  Record TMP101*                                                                                                                                                                                        
  --------------                                                                                                                                                                                        
  TMP_JOBNO*                                ----->    HDI*                        JOBNO                                                                                                                 
  TMP_CONSID*                               ----->    HDI*                        CONSID                                                                                                                
  TMP_MAWBNO*                               ----->    HDI*                        MAWBNO                                                                                                                
  TMP_DIR*                                  ----->    HDI*                        DIRECTION                                                                                                             
  TMP_DOCNO*                                ----->    HDI*                        DOCNO                                                                                                                 
                                                                                                                                                                                                        
  Record TMP302_401LOOP*                                                                                                                                                                                
  ----------------------                                                                                                                                                                                
  TMP_CLNTTYP*                              ----->    ADR*                        CLNTTYP                                                                                                               
  TMP_CLNTID*                               ----->    ADR*                        CLNTID                                                                                                                
  TEMP_NAME*                                ----->    ADR*                        NAME                                                                                                                  
  TEMP_ADD1*                                ----->    ADR*                        ADD1                                                                                                                  
  TEMP_ADD2*                                ----->    ADR*                        ADD2                                                                                                                  
  TEMP_ADD3*                                ----->    ADR*                        ADD3                                                                                                                  
  TEMP_ADD4*                                ----->    ADR*                        ADD4                                                                                                                  
  TEMP_POSTCD*                              ----->    ADR*                        POSTCD                                                                                                                
  TEMP_TOWNCD*                              ----->    ADR*                        TOWNCD                                                                                                                
  TEMP_COUNCD*                              ----->    ADR*                        COUNCD                                                                                                                
  TEMP_PHONE*                               ----->    ADR*                        PHONE                                                                                                                 
  TEMP_FAX*                                 ----->    ADR*                        FAX                                                                                                                   
  TEMP_EMAIL*                               ----->    ADR*                        EMAIL                                                                                                                 
  TEMP_CONT*                                ----->    ADR*                        CONT                                                                                                                  
                                                                                                                                                                                                        
  Record TMP303_302*                                                                                                                                                                                    
  ------------------                                                                                                                                                                                    
  TMP_FROMCC*                               ----->    HDI*                        FROMCC                                                                                                                
  TMP_FROMLC*                               ----->    HDI*                        FROMLC                                                                                                                
  TMP_TOCC*                                 ----->    HDI*                        TOCC                                                                                                                  
  TMP_TOLC*                                 ----->    HDI*                        TOLC                                                                                                                  
                                                                                                                                                                                                        
  Record TMP_304*                                                                                                                                                                                       
  ---------------                                                                                                                                                                                       
  TMP_UNITNO*                               ----->    UNI*                        UNITNO                                                                                                                
  TMP_UNITTYP*                              ----->    UNI*                        UNITTYP                                                                                                               
  TMP_SEALNO*                               ----->    UNI*                        SEALNO                                                                                                                
                                                                                                                                                                                                        
  Record TMP301*                                                                                                                                                                                        
  --------------                                                                                                                                                                                        
  TMP_INCOTM*                               ----->    HDI*                        INCOTM                                                                                                                
  TMP_COLREF*                               ----->    HDI*                        COLREF                                                                                                                
  TMP_DELREF*                               ----->    HDI*                        DELREF:2                                                                                                              
                                                                                                                                                                                                        
  Record TMP307*                                                                                                                                                                                        
  --------------                                                                                                                                                                                        
  TMP_DEPDATE1*                             ----->    HDI*                        DEPDATE1                                                                                                              
  TMP_ARRDATE1*                             ----->    HDI*                        ARRDATE1                                                                                                              
  TMP_COLDATE*                              ----->    HDI*                        COLDATE                                                                                                               
  TMP_DELDATE*                              ----->    HDI*                        DELDATE                                                                                                               
  TMP_COLTIMEFM*                            ----->    HDI*                        COLTIMEFM                                                                                                             
  TMP_COLTIMETO*                            ----->    HDI*                        COLTIMETO                                                                                                             
  TMP_DELTIMEFM*                            ----->    HDI*                        DELTIMEFM                                                                                                             
  TMP_DELTIMETO*                            ----->    HDI*                        DELTIMETO                                                                                                             
                                                                                                                                                                                                        
  Record TMP308Loop*                                                                                                                                                                                    
  ------------------                                                                                                                                                                                    
  TMP_INST*                                 ----->    HDL*                        INST                                                                                                                  
                                                                                                                                                                                                        
  Record TMP308Loop:2*                                                                                                                                                                                  
  --------------------                                                                                                                                                                                  
  TMP_INST:2*                               ----->    SPL*                        INST:2                                                                                                                
                                                                                                                                                                                                        
  Record TMP310_404Loop*                                                                                                                                                                                
  ----------------------                                                                                                                                                                                
  TMP_MARKS*                                ----->    SHP*                        MARKS                                                                                                                 
  TMP_PIECES*                               ----->    SHP*                        PIECES                                                                                                                
  TMP_PACK*                                 ----->    SHP*                        PACK                                                                                                                  
  TMP_DESC*                                 ----->    SHP*                        DESC                                                                                                                  
                                                                                                                                                                                                        
  Record TMP311_405Loop*                                                                                                                                                                                
  ----------------------                                                                                                                                                                                
  TMP_PIECES:2*                             ----->    DIM*                        PIECES:2                                                                                                              
  TMP_PACK:2*                               ----->    DIM*                        PACK:2                                                                                                                
  TMP_LENGTH*                               ----->    DIM*                        LENGTH                                                                                                                
  TMP_WIDTH*                                ----->    DIM*                        WIDTH                                                                                                                 
  TMP_HIGHT*                                ----->    DIM*                        HIGHT                                                                                                                 
  TMP_TOTALGW:2*                            ----->    DIM*                        TOTALGW:2                                                                                                             
  TMP_TOTALNW:2*                            ----->    DIM*                        TOTALNW:2                                                                                                             
  TMP_CUBED*                                ----->    DIM*                        CUBED                                                                                                                 
                                                                                                                                                                                                        
  Record TMP310*                                                                                                                                                                                        
  --------------                                                                                                                                                                                        
  TMP_TOTALPCS*                             ----->    HDI*                        TOTALPCS                                                                                                              
                                                                                                                                                                                                        
  Extended Rules                                                                                                                                                                                        
  --------------                                                                                                                                                                                        
                                                                                                                                                                                                        
  Pre-Session                                                                                                                                                                                           
  integer counter;                                                                                                                                                                                      
  counter=0;                                                                                                                                                                                            
  INPUT                                                                                                                                                                                                 
  On Begin                                                                                                                                                                                              
  string[20] jobno, mawbno, hawbno;                                                                                                                                                                     
  string[15] colclientid, delclientid;                                                                                                                                                                  
  string [3] docno;                                                                                                                                                                                     
  string [65] add4;                                                                                                                                                                                     
  Integer Jobcount, totalpieces, addresscounter, mncounter, dimcounter, hdlcounter,splcounter, barcount, totalmnqty, deltoadd, colfromadd;                                                              
  integer loc, length;                                                                                                                                                                                  
  integer missshpcc, misscolcc, missconcc, missnotcc, missdelcc;                                                                                                                                        
  object ob;                                                                                                                                                                                            
                                                                                                                                                                                                        
                                                                                                                                                                                                        
  deltoadd = 0;                                                                                                                                                                                         
  colfromadd = 0;                                                                                                                                                                                       
  Jobcount = 1;                                                                                                                                                                                         
  totalpieces = 0;                                                                                                                                                                                      
  addresscounter = 1;                                                                                                                                                                                   
  mncounter = 1;                                                                                                                                                                                        
  dimcounter = 1;                                                                                                                                                                                       
  hdlcounter = 1;                                                                                                                                                                                       
  splcounter = 1;                                                                                                                                                                                       
  barcount = 0;                                                                                                                                                                                         
  totalmnqty = 0;                                                                                                                                                                                       
  loc = 0;                                                                                                                                                                                              
  length = 0;                                                                                                                                                                                           
  missshpcc = 0;                                                                                                                                                                                        
  misscolcc = 0;                                                                                                                                                                                        
  missconcc = 0;                                                                                                                                                                                        
  missnotcc = 0;                                                                                                                                                                                        
  missdelcc = 0;                                                                                                                                                                                        
                                                                                                                                                                                                        
  jobno = "";                                                                                                                                                                                           
  mawbno = "";                                                                                                                                                                                          
  hawbno = "";                                                                                                                                                                                          
  docno = "";                                                                                                                                                                                           
  colclientid = "";                                                                                                                                                                                     
  delclientid = "";                                                                                                                                                                                     
  add4 = "";                                                                                                                                                                                            
  INPUT.D01HAWB                                                                                                                                                                                         
  hawbno = #D01HAWB;                                                                                                                                                                                    
  INPUT.D01MAWB                                                                                                                                                                                         
  mawbno = #D01MAWB;                                                                                                                                                                                    
  INPUT.D01PORD                                                                                                                                                                                         
  docno = right(#D01PORD,3);                                                                                                                                                                            
  INPUT.D01JOB                                                                                                                                                                                          
  //Input side:-                                                                                                                                                                                        
  // Create InputDocument/Transaction node.                                                                                                                                                             
  // Note that a space is passed to create the node                                                                                                                                                     
  // which has no real value.                                                                                                                                                                           
  update                                                                                                                                                                                                
  ProcessData                                                                                                                                                                                           
  set                                                                                                                                                                                                   
  XPathResult = " "                                                                                                                                                                                     
  where                                                                                                                                                                                                 
  XPath = "InputDocument/Transaction";                                                                                                                                                                  
  // Updating an attribute targets the last node                                                                                                                                                        
  // created so this works. Adding an attribute                                                                                                                                                         
  // for the properties key of the record set up                                                                                                                                                        
  // already in EP table [TransactionProperties].                                                                                                                                                       
  update                                                                                                                                                                                                
  ProcessData                                                                                                                                                                                           
  set                                                                                                                                                                                                   
  XPathResult = "2672"                                                                                                                                                                                  
  where                                                                                                                                                                                                 
  XPath = "InputDocument/Transaction/@PropertiesID";                                                                                                                                                    
                                                                                                                                                                                                        
  // Adding the node and value for the first                                                                                                                                                            
  // reference.                                                                                                                                                                                         
  update                                                                                                                                                                                                
   ProcessData                                                                                                                                                                                          
  set                                                                                                                                                                                                   
   XPathResult = #D01JOB                                                                                                                                                                                
  where                                                                                                                                                                                                 
   XPath = "InputDocument/Transaction/Reference";                                                                                                                                                       
                                                                                                                                                                                                        
  // Updating the reference node we just added with                                                                                                                                                     
  // the key of the properties set up previously in                                                                                                                                                     
  // the EP [PartnerRefProperties] table.                                                                                                                                                               
  update                                                                                                                                                                                                
   ProcessData                                                                                                                                                                                          
  set                                                                                                                                                                                                   
   XPathResult = "2530"                                                                                                                                                                                 
  where                                                                                                                                                                                                 
   XPath = "InputDocument/Transaction/Reference/@PropertiesID";                                                                                                                                         
                                                                                                                                                                                                        
  jobno = #D01JOB;                                                                                                                                                                                      
  JOB                                                                                                                                                                                                   
  On Begin                                                                                                                                                                                              
  //Initialises the details for a new Job Loop                                                                                                                                                          
                                                                                                                                                                                                        
  colclientid = "";                                                                                                                                                                                     
  delclientid = "";                                                                                                                                                                                     
  totalmnqty = 0;                                                                                                                                                                                       
  barcount = 1;                                                                                                                                                                                         
  totalpieces = 0;                                                                                                                                                                                      
  addresscounter = 1;                                                                                                                                                                                   
  mncounter=1;                                                                                                                                                                                          
  dimcounter=1;                                                                                                                                                                                         
  hdlcounter=1;                                                                                                                                                                                         
  splcounter=1;                                                                                                                                                                                         
  deltoadd = 0;                                                                                                                                                                                         
  colfromadd = 0;                                                                                                                                                                                       
  loc = 0;                                                                                                                                                                                              
  length = 0;                                                                                                                                                                                           
  missshpcc = 0;                                                                                                                                                                                        
  misscolcc = 0;                                                                                                                                                                                        
  missconcc = 0;                                                                                                                                                                                        
  missnotcc = 0;                                                                                                                                                                                        
  missdelcc = 0;                                                                                                                                                                                        
  On End                                                                                                                                                                                                
  $TMP_JOB[Jobcount].#TMP_JOBNO = jobno;                                                                                                                                                                
  $TMP_JOB[Jobcount].#TMP_CONSID = hawbno;                                                                                                                                                              
  $TMP_JOB[Jobcount].#TMP_MAWBNO = mawbno;                                                                                                                                                              
  $TMP_JOB[Jobcount].#TMP_DOCNO = docno;                                                                                                                                                                
  $TMP_JOB[Jobcount].#TMP_TOTALPCS = totalpieces;                                                                                                                                                       
  $TMP_JOB[Jobcount].#TMP_TOTALGW = #D11GRSW;                                                                                                                                                           
  $TMP_JOB[Jobcount].#TMP_TOTALNW = #D11NETW;                                                                                                                                                           
  $TMP_JOB[Jobcount].#TMP_TOTALCB = #D11CUBE;                                                                                                                                                           
  $TMP_JOB[Jobcount].#TMP_UNITNO = #D03CONT:2;                                                                                                                                                          
  $TMP_JOB[Jobcount].#TMP_UNITTYP = #D03CNTT:2;                                                                                                                                                         
  $TMP_JOB[Jobcount].#TMP_SEALNO = #D03SEAL:2;                                                                                                                                                          
                                                                                                                                                                                                        
  //****                                                                                                                                                                                                
                                                                                                                                                                                                        
  //checks if the 302 COLLECTFR & DELIVERTO contains an address, if fields dont exist then it creates it                                                                                                
  //at the end of the temp 401 loop otherwise it places it in the correct location.                                                                                                                     
                                                                                                                                                                                                        
  if deltoadd !=9999 &  $INPUT.#D01BUSM = "COLLECTION" THEN                                                                                                                                             
  Begin                                                                                                                                                                                                 
  	if deltoadd = 0 Then                                                                                                                                                                                 
  		deltoadd = addresscounter;                                                                                                                                                                          
  	$TMP302_401LOOP[Jobcount][deltoadd]. #TMP_CLNTTYP = "64";                                                                                                                                            
  	$TMP302_401LOOP[Jobcount][deltoadd]. #TMP_CLNTID = "GEOCH/BSL";                                                                                                                                      
  	$TMP302_401LOOP[Jobcount][deltoadd]. #TEMP_NAME = "AGILITY LOGISTICS AG";                                                                                                                            
  	$TMP302_401LOOP[Jobcount][deltoadd]. #TEMP_ADD1 = "St. Jakobs-Strasse 220";                                                                                                                          
  	$TMP302_401LOOP[Jobcount][deltoadd]. #TEMP_ADD4 = "4002 Basel, Switzerland";                                                                                                                         
  	$TMP302_401LOOP[Jobcount][deltoadd]. #TEMP_POSTCD = "4002";                                                                                                                                          
  	$TMP302_401LOOP[Jobcount][deltoadd]. #TEMP_TOWNCD = "BASEL";                                                                                                                                         
  	$TMP302_401LOOP[Jobcount][deltoadd]. #TEMP_COUNCD = "CH";                                                                                                                                            
  End                                                                                                                                                                                                   
                                                                                                                                                                                                        
  if colfromadd !=9999 &  $INPUT.#D01BUSM = "DELIVERY" THEN                                                                                                                                             
  Begin                                                                                                                                                                                                 
  	if colfromadd = 0 Then                                                                                                                                                                               
  		colfromadd = addresscounter;                                                                                                                                                                        
  	$TMP302_401LOOP[Jobcount][colfromadd]. #TMP_CLNTTYP = "63";                                                                                                                                          
  	$TMP302_401LOOP[Jobcount][colfromadd]. #TMP_CLNTID = "GEOCH/BSL";                                                                                                                                    
  	$TMP302_401LOOP[Jobcount][colfromadd]. #TEMP_NAME = "AGILITY LOGISTICS AG";                                                                                                                          
  	$TMP302_401LOOP[Jobcount][colfromadd]. #TEMP_ADD1 = "St. Jakobs-Strasse 220";                                                                                                                        
  	$TMP302_401LOOP[Jobcount][colfromadd]. #TEMP_ADD4 = "4002 Basel, Switzerland";                                                                                                                       
  	$TMP302_401LOOP[Jobcount][colfromadd]. #TEMP_POSTCD = "4002";                                                                                                                                        
  	$TMP302_401LOOP[Jobcount][colfromadd]. #TEMP_TOWNCD = "BASEL";                                                                                                                                       
  	$TMP302_401LOOP[Jobcount][colfromadd]. #TEMP_COUNCD = "CH";                                                                                                                                          
  End                                                                                                                                                                                                   
                                                                                                                                                                                                        
                                                                                                                                                                                                        
  //****                                                                                                                                                                                                
                                                                                                                                                                                                        
  IF $INPUT.#D01BUSM = "COLLECTION" THEN                                                                                                                                                                
  	$TMP_JOB[Jobcount].#TMP_DIR = 1;                                                                                                                                                                     
  	                                                                                                                                                                                                     
  IF $INPUT.#D01BUSM = "DELIVERY" THEN                                                                                                                                                                  
  	$TMP_JOB[Jobcount].#TMP_DIR = 2;                                                                                                                                                                     
                                                                                                                                                                                                        
                                                                                                                                                                                                        
  //Below from FIEG BAR Record, Not required for CTWI                                                                                                                                                   
  //IF $INPUT.#D01BUSM = "DELIVERY" THEN                                                                                                                                                                
  //Begin                                                                                                                                                                                               
  // 	While barcount <=totalmnqty do                                                                                                                                                                    
  //	begin                                                                                                                                                                                              
  //		ob = new("com.agilitylogistics.edi.si.EPUserExit");                                                                                                                                               
  //	                                                                                                                                                                                                   
  		// Call the method getSerialNo with 4 parameters                                                                                                                                                    
  //		$TMP310_404Loop[Jobcount][barcount]. #TMP_BAR  = ob.getSerialNo("",1554,"FIEG_HDUCN");                                                                                                            
  		//Below can be used to test the BAR record without accessing the database.                                                                                                                          
  		//$TMP310_404Loop[Jobcount][barcount]. #TMP_BAR  = "845076513";                                                                                                                                     
  //		                                                                                                                                                                                                  
  //		barcount=barcount+1;                                                                                                                                                                              
  //	end                                                                                                                                                                                                
  //End                                                                                                                                                                                                 
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
  //****                                                                                                                                                                                                
  Jobcount = Jobcount+1;                                                                                                                                                                                
  Reference_Group                                                                                                                                                                                       
  On End                                                                                                                                                                                                
  If #D10RFTP = "TERMS" Then                                                                                                                                                                            
  	$TMP_JOB[Jobcount].#TMP_INCOTM = #D10RFNO;                                                                                                                                                           
                                                                                                                                                                                                        
  // PB 20140602 add Collect and delivery ref.                                                                                                                                                          
  If #D10RFTP = "COLREF" Then                                                                                                                                                                           
  	$TMP_JOB[Jobcount].#TMP_COLREF = #D10RFNO;                                                                                                                                                           
                                                                                                                                                                                                        
  If #D10RFTP = "DELREF" Then                                                                                                                                                                           
  	$TMP_JOB[Jobcount].#TMP_DELREF = #D10RFNO;                                                                                                                                                           
  302_Group                                                                                                                                                                                             
  On Begin                                                                                                                                                                                              
  add4 = "";                                                                                                                                                                                            
  On End                                                                                                                                                                                                
  If #D08NAME != "" Then                                                                                                                                                                                
  BEGIN                                                                                                                                                                                                 
  	If $INPUT.#D01BUSM = "COLLECTION" & #D05CLTB = "CONTRLBRAN" THEN                                                                                                                                     
  		colclientid = #D05CLIE;                                                                                                                                                                             
                                                                                                                                                                                                        
  	If $INPUT.#D01BUSM = "DELIVERY" & #D05CLTB = "CONTRLBRAN" THEN                                                                                                                                       
  		delclientid = #D05CLIE;                                                                                                                                                                             
                                                                                                                                                                                                        
  	//*********                                                                                                                                                                                          
  	If #D05CLIT = "SHIPPER" Then                                                                                                                                                                         
  		$TMP302_401LOOP[Jobcount][addresscounter]. #TMP_CLNTTYP = "01";                                                                                                                                     
  	If #D05CLIT = "CONSIGNEE" Then                                                                                                                                                                       
  		$TMP302_401LOOP[Jobcount][addresscounter]. #TMP_CLNTTYP = "02";                                                                                                                                     
  	If #D05CLIT = "NOTIFY" Then                                                                                                                                                                          
  		$TMP302_401LOOP[Jobcount][addresscounter]. #TMP_CLNTTYP = "07";                                                                                                                                     
                                                                                                                                                                                                        
                                                                                                                                                                                                        
  	//If The address details are missing, use default address from Job Loop                                                                                                                              
  	If #D05CLIT = "COLLECTFR" Then                                                                                                                                                                       
  	Begin                                                                                                                                                                                                
  		$TMP302_401LOOP[Jobcount][addresscounter]. #TMP_CLNTTYP = "63";                                                                                                                                     
  		colfromadd = 9999;		                                                                                                                                                                                
  	End                                                                                                                                                                                                  
  	If #D05CLIT = "DELIVERTO" Then                                                                                                                                                                       
  	Begin                                                                                                                                                                                                
  		$TMP302_401LOOP[Jobcount][addresscounter]. #TMP_CLNTTYP = "64";                                                                                                                                     
  		deltoadd = 9999;                                                                                                                                                                                    
  	End                                                                                                                                                                                                  
                                                                                                                                                                                                        
                                                                                                                                                                                                        
  	//*********                                                                                                                                                                                          
                                                                                                                                                                                                        
  	If #D05CLIT = "SHIPPER" | #D05CLIT = "CONSIGNEE" | #D05CLIT = "NOTIFY" | #D05CLIT = "COLLECTFR" | #D05CLIT = "DELIVERTO" Then                                                                        
  	Begin                                                                                                                                                                                                
  		$TMP302_401LOOP[Jobcount][addresscounter]. #TEMP_NAME = #D08NAME;                                                                                                                                   
  		$TMP302_401LOOP[Jobcount][addresscounter]. #TEMP_ADD1 = #D08ADD1;                                                                                                                                   
  		$TMP302_401LOOP[Jobcount][addresscounter]. #TEMP_ADD2 = #D08ADD2;                                                                                                                                   
  		$TMP302_401LOOP[Jobcount][addresscounter]. #TEMP_ADD3 = #D08ADD3;                                                                                                                                   
  		$TMP302_401LOOP[Jobcount][addresscounter]. #TEMP_ADD4 = #D08ADD4;                                                                                                                                   
  		$TMP302_401LOOP[Jobcount][addresscounter]. #TEMP_COUNCD = #D08CTRY;                                                                                                                                 
  		$TMP302_401LOOP[Jobcount][addresscounter]. #TEMP_PHONE = #D08PHON;                                                                                                                                  
  		$TMP302_401LOOP[Jobcount][addresscounter]. #TEMP_FAX = #D08FAX;                                                                                                                                     
  		$TMP302_401LOOP[Jobcount][addresscounter]. #TEMP_EMAIL = #D08EMAD;                                                                                                                                  
  		$TMP302_401LOOP[Jobcount][addresscounter]. #TEMP_CONT = #D08PAGR;                                                                                                                                   
                                                                                                                                                                                                        
                                                                                                                                                                                                        
  		If #D08POST ="" | #D08POST ="                    " Then                                                                                                                                             
  		Begin                                                                                                                                                                                               
  			add4 = trim(#D08ADD4);                                                                                                                                                                             
  			loc = strstr(add4, " ");                                                                                                                                                                           
  			$TMP302_401LOOP[Jobcount][addresscounter]. #TEMP_POSTCD = left(add4, loc);                                                                                                                         
  		End                                                                                                                                                                                                 
  		Else                                                                                                                                                                                                
  			$TMP302_401LOOP[Jobcount][addresscounter]. #TEMP_POSTCD = #D08POST;                                                                                                                                
                                                                                                                                                                                                        
                                                                                                                                                                                                        
  		If #D08CITY ="" | #D08CITY ="                    " Then                                                                                                                                             
  		Begin                                                                                                                                                                                               
  			add4 = trim(#D08ADD4);                                                                                                                                                                             
  			length = len(add4);                                                                                                                                                                                
  			loc = strstr(add4, " ");                                                                                                                                                                           
  			add4 = mid(add4, loc,length);                                                                                                                                                                      
  			$TMP302_401LOOP[Jobcount][addresscounter]. #TEMP_TOWNCD = trim(add4);                                                                                                                              
  		End                                                                                                                                                                                                 
  		Else                                                                                                                                                                                                
  			$TMP302_401LOOP[Jobcount][addresscounter]. #TEMP_TOWNCD = #D08CITY;	                                                                                                                               
                                                                                                                                                                                                        
                                                                                                                                                                                                        
  		If #D08CTRY ="" Then                                                                                                                                                                                
  		Begin                                                                                                                                                                                               
  			//If doesnt exist then use From Country Code in 303 segment                                                                                                                                        
  			If #D05CLIT = "SHIPPER" Then                                                                                                                                                                       
  				missshpcc = addresscounter;                                                                                                                                                                       
                                                                                                                                                                                                        
  			//If doesnt exist then use To Country Code in 303 segment                                                                                                                                          
  			If #D05CLIT = "CONSIGNEE" Then                                                                                                                                                                     
  				missconcc = addresscounter;                                                                                                                                                                       
  			                                                                                                                                                                                                   
  			//If doesnt exist then use CH in 303 segment Loop                                                                                                                                                  
  			If #D05CLIT = "NOTIFY" Then                                                                                                                                                                        
  				missnotcc = addresscounter;                                                                                                                                                                       
  			If #D05CLIT = "COLLECTFR" Then                                                                                                                                                                     
  				misscolcc = addresscounter;                                                                                                                                                                       
  			If #D05CLIT = "DELIVERTO" Then                                                                                                                                                                     
  				missdelcc = addresscounter;		                                                                                                                                                                     
  		End                                                                                                                                                                                                 
  		Else                                                                                                                                                                                                
  			$TMP302_401LOOP[Jobcount][addresscounter]. #TEMP_COUNCD = #D08CTRY;	                                                                                                                               
                                                                                                                                                                                                        
  		addresscounter=addresscounter+1;                                                                                                                                                                    
  	End                                                                                                                                                                                                  
  End                                                                                                                                                                                                   
  Else                                                                                                                                                                                                  
  Begin                                                                                                                                                                                                 
  	//If The address details are missing, use default address from Job Loop                                                                                                                              
  	If #D05CLIT = "COLLECTFR" Then                                                                                                                                                                       
  	Begin                                                                                                                                                                                                
  		colfromadd = addresscounter;                                                                                                                                                                        
  		addresscounter=addresscounter+1;                                                                                                                                                                    
  	End                                                                                                                                                                                                  
                                                                                                                                                                                                        
  	If #D05CLIT = "DELIVERTO" Then                                                                                                                                                                       
  	Begin                                                                                                                                                                                                
  		deltoadd = addresscounter;                                                                                                                                                                          
  		addresscounter=addresscounter+1;                                                                                                                                                                    
  	End                                                                                                                                                                                                  
  End                                                                                                                                                                                                   
  FECD12P_303                                                                                                                                                                                           
  On End                                                                                                                                                                                                
  If $INPUT.#D01BUSM = "COLLECTION" THEN                                                                                                                                                                
  	Begin                                                                                                                                                                                                
  	$TMP_JOB[Jobcount].#TMP_FROMCC = "CH";                                                                                                                                                               
  	                                                                                                                                                                                                     
  	If missshpcc !=0 Then                                                                                                                                                                                
  		$TMP302_401LOOP[Jobcount][missshpcc]. #TEMP_COUNCD = "CH";                                                                                                                                          
  	If misscolcc !=0 Then                                                                                                                                                                                
  		$TMP302_401LOOP[Jobcount][misscolcc]. #TEMP_COUNCD = "CH";                                                                                                                                          
  	End                                                                                                                                                                                                  
  Else                                                                                                                                                                                                  
  If #D12POTP = "LOADING" Then                                                                                                                                                                          
  	Begin                                                                                                                                                                                                
  	$TMP_JOB[Jobcount].#TMP_FROMCC = right(#D12PORT,2);                                                                                                                                                  
  	                                                                                                                                                                                                     
  	If missshpcc !=0 Then                                                                                                                                                                                
  		$TMP302_401LOOP[Jobcount][missshpcc]. #TEMP_COUNCD = right(#D12PORT,2);                                                                                                                             
  	If misscolcc !=0 Then                                                                                                                                                                                
  		$TMP302_401LOOP[Jobcount][misscolcc]. #TEMP_COUNCD = "CH";                                                                                                                                          
  	End                                                                                                                                                                                                  
                                                                                                                                                                                                        
  If colclientid !="" Then                                                                                                                                                                              
  	$TMP_JOB[Jobcount].#TMP_FROMLC = colclientid;                                                                                                                                                        
  Else                                                                                                                                                                                                  
  If #D12POTP = "LOADING" Then                                                                                                                                                                          
  	$TMP_JOB[Jobcount].#TMP_FROMLC = left(#D12PORT,4);                                                                                                                                                   
                                                                                                                                                                                                        
  //*******                                                                                                                                                                                             
  If $INPUT.#D01BUSM = "DELIVERY" THEN                                                                                                                                                                  
  	Begin                                                                                                                                                                                                
  	$TMP_JOB[Jobcount].#TMP_TOCC = "CH";                                                                                                                                                                 
                                                                                                                                                                                                        
  	If missconcc !=0 Then                                                                                                                                                                                
  		$TMP302_401LOOP[Jobcount][missconcc]. #TEMP_COUNCD = "CH";                                                                                                                                          
  	If missnotcc !=0 Then                                                                                                                                                                                
  		$TMP302_401LOOP[Jobcount][missnotcc]. #TEMP_COUNCD = "CH";                                                                                                                                          
  	If missdelcc !=0 Then                                                                                                                                                                                
  		$TMP302_401LOOP[Jobcount][missdelcc]. #TEMP_COUNCD = "CH";                                                                                                                                          
  	End                                                                                                                                                                                                  
  Else                                                                                                                                                                                                  
  If #D12POTP = "DESTINATIO" Then                                                                                                                                                                       
  	Begin                                                                                                                                                                                                
  	$TMP_JOB[Jobcount].#TMP_TOCC = right(#D12PORT,2);                                                                                                                                                    
                                                                                                                                                                                                        
  	If missconcc !=0 Then                                                                                                                                                                                
  		$TMP302_401LOOP[Jobcount][missconcc]. #TEMP_COUNCD = right(#D12PORT,2);                                                                                                                             
  	If missnotcc !=0 Then                                                                                                                                                                                
  		$TMP302_401LOOP[Jobcount][missnotcc]. #TEMP_COUNCD = "CH";                                                                                                                                          
  	If missdelcc !=0 Then                                                                                                                                                                                
  		$TMP302_401LOOP[Jobcount][missdelcc]. #TEMP_COUNCD = "CH";                                                                                                                                          
  	End                                                                                                                                                                                                  
                                                                                                                                                                                                        
  If delclientid !="" Then                                                                                                                                                                              
  	$TMP_JOB[Jobcount].#TMP_TOLC = delclientid;                                                                                                                                                          
  Else                                                                                                                                                                                                  
  If #D12POTP = "DESTINATIO" Then                                                                                                                                                                       
  	$TMP_JOB[Jobcount].#TMP_TOLC = left(#D12PORT,4);                                                                                                                                                     
  FECD06P_307                                                                                                                                                                                           
  On End                                                                                                                                                                                                
  If #D06STSC = "DEPARTURE" & #D06STSD !="00000000" Then                                                                                                                                                
  	$TMP_JOB[Jobcount].#TMP_DEPDATE1 = date("%Y%m%d",#D06STSD);                                                                                                                                          
                                                                                                                                                                                                        
  If #D06STSC = "ARRIVAL" & #D06STSD !="00000000" Then                                                                                                                                                  
  	$TMP_JOB[Jobcount].#TMP_ARRDATE1 = date("%Y%m%d",#D06STSD);                                                                                                                                          
                                                                                                                                                                                                        
  //***                                                                                                                                                                                                 
  If #D06STSC = "COLLECTFR" & #D06STSD !="00000000" Then                                                                                                                                                
  	$TMP_JOB[Jobcount].#TMP_COLDATE= date("%Y%m%d",#D06STSD);                                                                                                                                            
  	                                                                                                                                                                                                     
  If #D06STSC = "DELIVERFR" & #D06STSD !="00000000" Then                                                                                                                                                
  	$TMP_JOB[Jobcount].#TMP_DELDATE= date("%Y%m%d",#D06STSD);                                                                                                                                            
  	                                                                                                                                                                                                     
  If #D06STSC = "COLLECTFR" & #D06STST !="000000" Then                                                                                                                                                  
  	$TMP_JOB[Jobcount].#TMP_COLTIMEFM= date("%H%M%S",#D06STST);                                                                                                                                          
                                                                                                                                                                                                        
  If #D06STSC = "COLLECTTO" & #D06STST !="000000" Then                                                                                                                                                  
  	$TMP_JOB[Jobcount].#TMP_COLTIMETO= date("%H%M%S",#D06STST);                                                                                                                                          
  	                                                                                                                                                                                                     
  If #D06STSC = "DELIVERFR" & #D06STST !="000000" Then                                                                                                                                                  
  	$TMP_JOB[Jobcount].#TMP_DELTIMEFM= date("%H%M%S",#D06STST);                                                                                                                                          
  	                                                                                                                                                                                                     
  If #D06STSC = "DELIVERTO" & #D06STST !="000000" Then                                                                                                                                                  
  	$TMP_JOB[Jobcount].#TMP_DELTIMETO= date("%H%M%S",#D06STST);                                                                                                                                          
  Notes_Group                                                                                                                                                                                           
  On End                                                                                                                                                                                                
  If #D13NOTP:2 = "HANDLGINTR" Then                                                                                                                                                                     
  Begin                                                                                                                                                                                                 
  	if left(#D13NOTE:2, 75) !="" Then                                                                                                                                                                    
  	Begin                                                                                                                                                                                                
  		$TMP308Loop[Jobcount][hdlcounter]. #TMP_INST = #D13NOTE:2;                                                                                                                                          
  		hdlcounter=hdlcounter+1;                                                                                                                                                                            
  	End                                                                                                                                                                                                  
  	if mid(#D13NOTE:2, 75,75) !="" Then                                                                                                                                                                  
  	Begin                                                                                                                                                                                                
  		$TMP308Loop[Jobcount][hdlcounter]. #TMP_INST = mid(#D13NOTE:2, 75,75);                                                                                                                              
  		hdlcounter=hdlcounter+1;                                                                                                                                                                            
  	End	                                                                                                                                                                                                 
  	if mid(#D13NOTE:2, 150,75) !="" Then                                                                                                                                                                 
  	Begin                                                                                                                                                                                                
  		$TMP308Loop[Jobcount][hdlcounter]. #TMP_INST = mid(#D13NOTE:2, 150,75);                                                                                                                             
  		hdlcounter=hdlcounter+1;                                                                                                                                                                            
  	End	                                                                                                                                                                                                 
  	if mid(#D13NOTE:2, 225,75) !="" Then                                                                                                                                                                 
  	Begin                                                                                                                                                                                                
  		$TMP308Loop[Jobcount][hdlcounter]. #TMP_INST = mid(#D13NOTE:2, 225,75);                                                                                                                             
  		hdlcounter=hdlcounter+1;                                                                                                                                                                            
  	End                                                                                                                                                                                                  
  	if mid(#D13NOTE:2, 300,75) !="" Then                                                                                                                                                                 
  	Begin                                                                                                                                                                                                
  		$TMP308Loop[Jobcount][hdlcounter]. #TMP_INST = mid(#D13NOTE:2, 300,75);                                                                                                                             
  		hdlcounter=hdlcounter+1;                                                                                                                                                                            
  	End                                                                                                                                                                                                  
  End                                                                                                                                                                                                   
                                                                                                                                                                                                        
  If #D13NOTP:2 = "SPECINSTR" Then                                                                                                                                                                      
  Begin	                                                                                                                                                                                                
  	if left(#D13NOTE:2, 75) !="" Then                                                                                                                                                                    
  	Begin                                                                                                                                                                                                
  		$TMP308Loop:2[Jobcount][splcounter]. #TMP_INST:2 = #D13NOTE:2;                                                                                                                                      
  		splcounter=splcounter+1;                                                                                                                                                                            
  	End                                                                                                                                                                                                  
  	if mid(#D13NOTE:2, 75,75) !="" Then                                                                                                                                                                  
  	Begin                                                                                                                                                                                                
  		$TMP308Loop:2[Jobcount][splcounter]. #TMP_INST:2 = mid(#D13NOTE:2, 75,75);                                                                                                                          
  		splcounter=splcounter+1;                                                                                                                                                                            
  	End	                                                                                                                                                                                                 
  	if mid(#D13NOTE:2, 150,75) !="" Then                                                                                                                                                                 
  	Begin                                                                                                                                                                                                
  		$TMP308Loop:2[Jobcount][splcounter]. #TMP_INST:2 = mid(#D13NOTE:2, 150,75);                                                                                                                         
  		splcounter=splcounter+1;                                                                                                                                                                            
  	End                                                                                                                                                                                                  
  	if mid(#D13NOTE:2, 225,75) !="" Then                                                                                                                                                                 
  	Begin                                                                                                                                                                                                
  		$TMP308Loop:2[Jobcount][splcounter]. #TMP_INST:2 = mid(#D13NOTE:2, 225,75);                                                                                                                         
  		splcounter=splcounter+1;                                                                                                                                                                            
  	End	                                                                                                                                                                                                 
  	if mid(#D13NOTE:2, 300,75) !="" Then                                                                                                                                                                 
  	Begin                                                                                                                                                                                                
  		$TMP308Loop:2[Jobcount][splcounter]. #TMP_INST:2 = mid(#D13NOTE:2, 300,75);                                                                                                                         
  		splcounter=splcounter+1;                                                                                                                                                                            
  	End		                                                                                                                                                                                                
  End                                                                                                                                                                                                   
  310_404_Group                                                                                                                                                                                         
  On End                                                                                                                                                                                                
  totalpieces = totalpieces+#D04QTY:5;                                                                                                                                                                  
                                                                                                                                                                                                        
  $TMP310_404Loop[Jobcount][mncounter]. #TMP_MARKS = #D10RFNO:5;                                                                                                                                        
  $TMP310_404Loop[Jobcount][mncounter]. #TMP_PIECES = #D04QTY:5;                                                                                                                                        
  $TMP310_404Loop[Jobcount][mncounter]. #TMP_PACK = #D04QTYU:3;                                                                                                                                         
  $TMP310_404Loop[Jobcount][mncounter]. #TMP_DESC = #D10DESC:5;                                                                                                                                         
                                                                                                                                                                                                        
  totalmnqty = totalmnqty + #D04QTY:5;                                                                                                                                                                  
                                                                                                                                                                                                        
  mncounter=mncounter+1;                                                                                                                                                                                
  311_Group                                                                                                                                                                                             
  On End                                                                                                                                                                                                
  $TMP311_405Loop[Jobcount][dimcounter]. #TMP_PIECES:2 = #D04QTY:7;                                                                                                                                     
  $TMP311_405Loop[Jobcount][dimcounter]. #TMP_PACK:2 = #D04QTYU:6;                                                                                                                                      
                                                                                                                                                                                                        
  dimcounter=dimcounter+1;                                                                                                                                                                              
  FECD14P_405                                                                                                                                                                                           
  On End                                                                                                                                                                                                
  If #D14DIMT:3 = "DIMS" Then                                                                                                                                                                           
  Begin                                                                                                                                                                                                 
  	$TMP311_405Loop[Jobcount][dimcounter]. #TMP_TOTALGW:2 = #D14WGHT:3;                                                                                                                                  
  	$TMP311_405Loop[Jobcount][dimcounter]. #TMP_LENGTH = #D14LONG:3;                                                                                                                                     
  	$TMP311_405Loop[Jobcount][dimcounter]. #TMP_WIDTH = #D14WIDE:3;                                                                                                                                      
  	$TMP311_405Loop[Jobcount][dimcounter]. #TMP_HIGHT = #D14HIGH:3;                                                                                                                                      
  	$TMP311_405Loop[Jobcount][dimcounter]. #TMP_CUBED = #D14VOL:3;                                                                                                                                       
  End                                                                                                                                                                                                   
  If #D14DIMT:3 = "NETWEIGHT" Then	                                                                                                                                                                     
  	$TMP311_405Loop[Jobcount][dimcounter]. #TMP_TOTALNW:2 = #D14WGHT:3;                                                                                                                                  
  OUTPUT                                                                                                                                                                                                
  On Begin                                                                                                                                                                                              
  integer jobcount;                                                                                                                                                                                     
  jobcount=0;                                                                                                                                                                                           
  Job.JOBNO                                                                                                                                                                                             
  if jobcount = 0 Then                                                                                                                                                                                  
  Begin                                                                                                                                                                                                 
  	//-----------------------------------------------                                                                                                                                                    
  	//Output side:-                                                                                                                                                                                      
  	// Create OutputDocument/Transaction node.                                                                                                                                                           
  	// Note that a space is passed to create the node                                                                                                                                                    
  	// which has no real value.                                                                                                                                                                          
  	update                                                                                                                                                                                               
  	ProcessData                                                                                                                                                                                          
  	set                                                                                                                                                                                                  
  	XPathResult = " "                                                                                                                                                                                    
  	where                                                                                                                                                                                                
  	XPath = "OutputDocument/Transaction";                                                                                                                                                                
  	// Updating an attribute targets the last node                                                                                                                                                       
  	// created so this works. Adding an attribute                                                                                                                                                        
  	// for the properties key of the record set up                                                                                                                                                       
  	// already in EP table [TransactionProperties].                                                                                                                                                      
  	update                                                                                                                                                                                               
  	ProcessData                                                                                                                                                                                          
  	set                                                                                                                                                                                                  
  	XPathResult = "2673"                                                                                                                                                                                 
  	where                                                                                                                                                                                                
  	XPath = "OutputDocument/Transaction/@PropertiesID";                                                                                                                                                  
                                                                                                                                                                                                        
  	// Adding the node and value for the first                                                                                                                                                           
  	// reference.                                                                                                                                                                                        
  	update                                                                                                                                                                                               
   	ProcessData                                                                                                                                                                                         
  	set                                                                                                                                                                                                  
   	XPathResult = #JOBNO                                                                                                                                                                                
  	where                                                                                                                                                                                                
   	XPath = "OutputDocument/Transaction/Reference";                                                                                                                                                     
                                                                                                                                                                                                        
  	// Updating the reference node we just added with                                                                                                                                                    
  	// the key of the properties set up previously in                                                                                                                                                    
  	// the EP [PartnerRefProperties] table.                                                                                                                                                              
  	update                                                                                                                                                                                               
   	ProcessData                                                                                                                                                                                         
  	set                                                                                                                                                                                                  
   	XPathResult = "2533"                                                                                                                                                                                
  	where                                                                                                                                                                                                
   	XPath = "OutputDocument/Transaction/Reference/@PropertiesID";                                                                                                                                       
  	                                                                                                                                                                                                     
  	jobcount = 1;                                                                                                                                                                                        
  end                                                                                                                                                                                                   
  Job.MASTER                                                                                                                                                                                            
  #MASTER = 0;                                                                                                                                                                                          
  Job.MODE                                                                                                                                                                                              
  #MODE = 1;                                                                                                                                                                                            
  SHP.SEQ                                                                                                                                                                                               
  //counter=counter+1;                                                                                                                                                                                  
  //#SEQ=counter;                                                                                                                                                                                       
                                                                                                                                                                                                        
  Codelists                                                                                                                                                                                             
  ---------                                                                                                                                                                                             
                                                                                                                                                                                                        
